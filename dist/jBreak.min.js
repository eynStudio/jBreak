"use strict";angular.module("ngLocale",[],["$provide",function(t){var e={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};t.value("$locale",{DATETIME_FORMATS:{AMPMS:["上午","下午"],DAY:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],ERANAMES:["公元前","公元"],ERAS:["公元前","公元"],FIRSTDAYOFWEEK:6,MONTH:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],SHORTDAY:["周日","周一","周二","周三","周四","周五","周六"],SHORTMONTH:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],WEEKENDRANGE:[5,6],fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"y年M月d日 ah:mm:ss",mediumDate:"y年M月d日",mediumTime:"ah:mm:ss","short":"yy/M/d ah:mm",shortDate:"yy/M/d",shortTime:"ah:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"¥",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"¤ -",negSuf:"",posPre:"¤ ",posSuf:""}]},id:"zh-cn",pluralCat:function(){return e.OTHER}})}]),function(){function t(){for(var t=arguments[0],e=1;e<arguments.length;e++){var n=new RegExp("\\{"+(e-1)+"\\}","gm");t=t.replace(n,arguments[e])}return t}function e(){return"_"+ ++a}var n=angular.module("jb",[]),a=0;n.service("$jb",function(){this.nextUid=e,this.fmt=t})}(),angular.module("jb.auth",["ui.router","LocalStorageModule"]).factory("jbAuthUser",["localStorageService",function(t){function e(){return t.get("user")}var n={Xm:e,isAuth:function(){return!!e()}};return n}]).provider("jbAuth",function(){function t(t,a,i){n.push({config:t,deferred:a}),i&&"/login"!=i&&(e=i)}var e,n=[];this.$get=["$rootScope","$injector","$location","$cookies","jbAuthUser","localStorageService",function(a,i,o,r,l,s){function u(t,e){d=d||i.get("$http"),d(t).then(function(t){e.resolve(t)})}function c(){for(var t=0;t<n.length;++t)u(n[t].config,n[t].deferred);n=[]}var d;return{pushToBuffer:t,loginConfirmed:function(t,n){s.set("token",t),s.set("user",n),a.$broadcast("event:authConfirmed"),c(),e&&o.path(e)},logoutSuccess:function(){s.clearAll(),a.$broadcast("event:authLogout")}}}]}).factory("jbAuthInterceptor",["$rootScope","$q","$location","jbAuth","localStorageService",function(t,e,n,a,i){return{request:function(t){t.headers=t.headers||{};var e=i.get("token");return null!==e&&(t.headers.Authorization="jBreak "+e),t},responseError:function(i){if(403===i.status){var o=e.defer();return a.pushToBuffer(i.config,o,n.path()),t.$broadcast("event:authRequest"),o.promise}return e.reject(i)}}}]).config(["$httpProvider","jbAuthProvider",function(t){t.interceptors.push("jbAuthInterceptor")}]),function(t){var e=t.module("jb.ctx",["jb.sys","jb.res","jb.ctx4gp"]);e.factory("jbCtx",["jbSys","jbRes",function(e,n){function a(a,i,o){function r(){p.paging=d.page({page:p.page})}function l(t){p.page=t,r()}function s(t){p.editIdx=t,p.editItem=-1===t?d.create():p.editItem=angular.copy(p.paging.Items[t])}function u(){(p.beforeSave||t.noop)(),d.save(p.editItem,function(){p.refresh(),p.editIdx=null})}function c(){e.curCtx=p}var d=n(a,i,o),p={res:d,lst:[],sys:e,asCur:c,refresh:r,edit:s,save:u,pager:l,page:1};return p}return a}]),e.factory("jbCtxP",["jbRes",function(e){function n(n,a,i){function o(t){t&&(c.filter=t),u.post({filter:""},c.filter,function(t){c.lst=t.Items,c.total=t.Total})}function r(t){c.filter.page=t,o()}function l(e){c.editIdx=e,c.editItem=-1===e?u.create():c.editItem=t.copy(c.lst[e])}function s(){(c.beforeSave||t.noop)(),u.save(c.editItem,function(){c.refresh(),c.editIdx=null})}var u=e(n,a,i),c={lst:[],res:u,refresh:o,edit:l,save:s,pager:r,total:0,filter:{page:1,perPage:20}};return c}return n}]),e.factory("jbCtxL",["jbRes",function(e){function n(n,a,i){function o(){c.lst=u.query()}function r(e){c.editIdx=e,c.editItem=-1===e?u.create():c.editItem=t.copy(c.lst[e])}function l(){(c.beforeSave||t.noop)(),u.save(c.editItem,function(t){c.lst=t,c.editIdx=null})}var s={save:{method:"put",isArray:!0}};i=t.extend(s,i);var u=e(n,a,i),c={lst:[],res:u,refresh:o,edit:r,save:l};return c}return n}])}(angular),function(t){var e=t.module("jb.ctx4gp",["jb.sys","jb.res"]);e.factory("jbCtx4gp",["jbSys","jbResGP",function(e,n){function a(a,i,o){function r(){p.paging=d.page({page:p.page})}function l(t){p.page=t,r()}function s(t){p.editIdx=t,p.editItem=-1===t?d.create():p.editItem=angular.copy(p.paging.Items[t])}function u(){(p.beforeSave||t.noop)(),d.save(p.editItem,function(){p.refresh(),p.editIdx=null})}function c(){e.curCtx=p}var d=n(a,i,o),p={res:d,lst:[],sys:e,asCur:c,refresh:r,edit:s,save:u,pager:l,page:1};return p}return a}]),e.factory("jbCtxP4gp",["jbResGP",function(e){function n(n,a,i){function o(t){t&&(c.filter=t),u.post({filter:""},c.filter,function(t){c.lst=t.Items,c.total=t.Total})}function r(t){c.filter.page=t,o()}function l(e){c.editIdx=e,c.editItem=-1===e?u.create():c.editItem=t.copy(c.lst[e])}function s(){(c.beforeSave||t.noop)(),u.save(c.editItem,function(){c.refresh(),c.editIdx=null})}var u=e(n,a,i),c={lst:[],res:u,refresh:o,edit:l,save:s,pager:r,total:0,filter:{page:1,perPage:20}};return c}return n}]),e.factory("jbCtxL4gp",["jbResGP",function(e){function n(n,a,i){function o(){d.lst=c.query()}function r(e){d.editIdx=e,d.editItem=-1===e?c.create():d.editItem=t.copy(d.lst[e])}function l(t){d.editIdx=null,d.lst=c.del({id:t},{})}function s(){(d.beforeSave||t.noop)(),c.save(d.editItem,function(t){d.lst=t,d.editIdx=null})}var u={save:{method:"post",isArray:!0,params:{save_:!0}}};i=t.extend(u,i);var c=e(n,a,i),d={lst:[],res:c,refresh:o,edit:r,save:s,del:l};return d}return n}])}(angular),function(t){function e(t,e,n){return{Condition:t||"NONE",Rules:[e,n]}}function n(t,n,i){return e(t,a(n,i),a(n,i))}function a(t,e,n,a){var i={Field:t,Opt:e||"contains",Val1:n||"",Val2:a||""};return i.hello=function(){console.log("hi")},i}var i=t.module("jb.filter",[]);i.provider("$jbFilter",function(){this.$get=function(){return{rule:a,group:e,group2:n}}})}(angular),function(t){var e=t.module("jb.res",["ngResource"]);e.factory("jbRes",["$resource",function(t){return function(e,n,a){var i={create:{method:"post"},save:{method:"put"},add:{method:"put",isArray:!0},del:{method:"delete",isArray:!0},update:{method:"post",isArray:!0},post:{method:"post"},page:{method:"get",params:{page:1}}};return a=angular.extend(i,a),t(e,n,a)}}]),e.factory("jbResGP",["$resource",function(t){return function(e,n,a){var i={create:{method:"post",params:{new_:!0}},save:{method:"post",params:{save_:!0}},add:{method:"post",isArray:!0,params:{add_:!0}},del:{method:"post",isArray:!0,params:{del_:!0}},update:{method:"post",isArray:!0},post:{method:"post"},page:{method:"get",params:{page:1}},remove:{method:"post",params:{del_:!0}},"delete":{method:"post",params:{del_:!0}}};return a=angular.extend(i,a),t(e,n,a)}}])}(angular),angular.module("jb.sys",[]).factory("jbSys",["$rootScope",function(t){t.back=function(){window.history.back()};var e={curCtx:void 0};return t.sys=e,e}]),function(t){var e=t.module("jb.zd",["jb.res"]);e.provider("$jbZd",function(){this.$get=["$cacheFactory","jbRes","$q",function(t,e,n){function a(t){var e=n.defer(),a=i.get(t);return a?e.resolve(a):o.query({bq:t},function(n){i.put(t,n),e.resolve(n)}),e.promise}var i=t("jbZd"),o=e("/api/IbZd/:id",{id:"@id"});return{get:a}}]}),e.directive("jbSelectZd",["$jbZd",function(t){return{replace:!0,scope:{jbSelectZd:"@"},template:'<select class="form-control" ng-options="zd.Dm as zd.Mc for zd in $src"></select>',link:function(e){t.get(e.jbSelectZd).then(function(t){e.$src=t})}}}]),e.directive("jbZd",["$jbZd",function(t){return{scope:{jbZd:"@",jbZdDm:"="},template:"<span>{{zd.Mc}}</span>",link:function(e){function n(t){for(var n=0,a=t.length;a>n;n++)if(t[n].Dm==e.jbZdDm)return t[n];return null}t.get(e.jbZd).then(function(t){e.zd=n(t)})}}}])}(angular),angular.module("jb.ui",["ngLocale","jb.ui.tpls","jb.util","jb","jb.ui.table","jb.zd","jb.ui.widget"]),angular.module("jb.util.dateParser",[]).provider("$jbDateParser",["$localeProvider",function(){function t(){this.year=1970,this.month=0,this.day=1,this.hours=0,this.minutes=0,this.seconds=0,this.milliseconds=0}function e(){}function n(t){return!isNaN(parseFloat(t))&&isFinite(t)}function a(t,e){for(var n=t.length,a=e.toString().toLowerCase(),i=0;n>i;i++)if(t[i].toLowerCase()===a)return i;return-1}t.prototype.setMilliseconds=function(t){this.milliseconds=t},t.prototype.setSeconds=function(t){this.seconds=t},t.prototype.setMinutes=function(t){this.minutes=t},t.prototype.setHours=function(t){this.hours=t},t.prototype.getHours=function(){return this.hours},t.prototype.setDate=function(t){this.day=t},t.prototype.setMonth=function(t){this.month=t},t.prototype.setFullYear=function(t){this.year=t},t.prototype.fromDate=function(t){return this.year=t.getFullYear(),this.month=t.getMonth(),this.day=t.getDate(),this.hours=t.getHours(),this.minutes=t.getMinutes(),this.seconds=t.getSeconds(),this.milliseconds=t.getMilliseconds(),this},t.prototype.toDate=function(){return new Date(this.year,this.month,this.day,this.hours,this.minutes,this.seconds,this.milliseconds)};var i=t.prototype,o=this.defaults={format:"shortDate",strict:!1};this.$get=["$locale","dateFilter",function(r,l){var s=function(s){function u(t){var e,n=Object.keys(b),a=[],i=[],o=t;for(e=0;e<n.length;e++)if(t.split(n[e]).length>1){var r=o.search(n[e]);t=t.split(n[e]).join(""),b[n[e]]&&(a[r]=b[n[e]])}return angular.forEach(a,function(t){t&&i.push(t)}),i}function c(t){return t.replace(/\//g,"[\\/]").replace("/-/g","[-]").replace(/\./g,"[.]").replace(/\\s/g,"[\\s]")}function d(t){var e,n=Object.keys(h),a=t;for(e=0;e<n.length;e++)a=a.split(n[e]).join("${"+e+"}");for(e=0;e<n.length;e++)a=a.split("${"+e+"}").join("("+h[n[e]]+")");return t=c(t),new RegExp("^"+a+"$",["i"])}var p,f,g=angular.extend({},o,s),m={},h={sss:"[0-9]{3}",ss:"[0-5][0-9]",s:g.strict?"[1-5]?[0-9]":"[0-9]|[0-5][0-9]",mm:"[0-5][0-9]",m:g.strict?"[1-5]?[0-9]":"[0-9]|[0-5][0-9]",HH:"[01][0-9]|2[0-3]",H:g.strict?"1?[0-9]|2[0-3]":"[01]?[0-9]|2[0-3]",hh:"[0][1-9]|[1][012]",h:g.strict?"[1-9]|1[012]":"0?[1-9]|1[012]",a:"AM|PM",EEEE:r.DATETIME_FORMATS.DAY.join("|"),EEE:r.DATETIME_FORMATS.SHORTDAY.join("|"),dd:"0[1-9]|[12][0-9]|3[01]",d:g.strict?"[1-9]|[1-2][0-9]|3[01]":"0?[1-9]|[1-2][0-9]|3[01]",MMMM:r.DATETIME_FORMATS.MONTH.join("|"),MMM:r.DATETIME_FORMATS.SHORTMONTH.join("|"),MM:"0[1-9]|1[012]",M:g.strict?"[1-9]|1[012]":"0?[1-9]|1[012]",yyyy:"[1]{1}[0-9]{3}|[2]{1}[0-9]{3}",yy:"[0-9]{2}",y:g.strict?"-?(0|[1-9][0-9]{0,3})":"-?0*[0-9]{1,4}"},b={sss:i.setMilliseconds,ss:i.setSeconds,s:i.setSeconds,mm:i.setMinutes,m:i.setMinutes,HH:i.setHours,H:i.setHours,hh:i.setHours,h:i.setHours,EEEE:e,EEE:e,dd:i.setDate,d:i.setDate,a:function(t){var e=this.getHours()%12;return this.setHours(t.match(/pm/i)?e+12:e)},MMMM:function(t){return this.setMonth(a(r.DATETIME_FORMATS.MONTH,t))},MMM:function(t){return this.setMonth(a(r.DATETIME_FORMATS.SHORTMONTH,t))},MM:function(t){return this.setMonth(1*t-1)},M:function(t){return this.setMonth(1*t-1)},yyyy:i.setFullYear,yy:function(t){return this.setFullYear(2e3+1*t)},y:i.setFullYear};return m.init=function(){m.$format=r.DATETIME_FORMATS[g.format]||g.format,p=d(m.$format),f=u(m.$format)},m.isValid=function(t){return angular.isDate(t)?!isNaN(t.getTime()):p.test(t)},m.parse=function(e,n,a){a&&(a=r.DATETIME_FORMATS[a]||a),angular.isDate(e)&&(e=l(e,a||m.$format));var i=a?d(a):p,o=a?u(a):f,s=i.exec(e);if(!s)return!1;for(var c=n&&!isNaN(n.getTime())?(new t).fromDate(n):(new t).fromDate(new Date(1970,0,1,0)),g=0;g<s.length-1;g++)o[g]&&o[g].call(c,s[g+1]);var h=c.toDate();return parseInt(c.day,10)!==h.getDate()?!1:h},m.getDateForAttribute=function(t,e){var a;if("today"===e){var i=new Date;a=new Date(i.getFullYear(),i.getMonth(),i.getDate()+("maxDate"===t?1:0),0,0,0,"minDate"===t?0:-1)}else a=angular.isString(e)&&e.match(/^".+"$/)?new Date(e.substr(1,e.length-2)):n(e)?new Date(parseInt(e,10)):angular.isString(e)&&0===e.length?"minDate"===t?-1/0:+1/0:new Date(e);return a},m.getTimeForAttribute=function(t,e){var a;return a="now"===e?(new Date).setFullYear(1970,0,1):angular.isString(e)&&e.match(/^".+"$/)?new Date(e.substr(1,e.length-2)).setFullYear(1970,0,1):n(e)?new Date(parseInt(e,10)).setFullYear(1970,0,1):angular.isString(e)&&0===e.length?"minTime"===t?-1/0:+1/0:m.parse(e,new Date(1970,0,1,0))},m.daylightSavingAdjust=function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},m.init(),m};return s}]}]).service("$jbDateFormatter",["$locale","dateFilter",function(t,e){function n(t){return/(h+)([:\.])?(m+)[ ]?(a?)/i.exec(t).slice(1)}this.getDefaultLocale=function(){return t.id},this.getDatetimeFormat=function(e){return t.DATETIME_FORMATS[e]||e},this.weekdaysShort=function(){return t.DATETIME_FORMATS.SHORTDAY},this.hoursFormat=function(t){return n(t)[0]},this.minutesFormat=function(t){return n(t)[2]},this.timeSeparator=function(t){return n(t)[1]},this.showAM=function(t){return!!n(t)[3]},this.formatDate=function(t,n){return e(t,n)}}]),function(){var t=angular.module("jb.util.parseOptions",[]);t.provider("$jbParseOptions",function(){var t=this.defaults={regexp:/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/};this.$get=["$parse","$q",function(e,n){function a(a,i){function o(t,e){return t.map(function(t,n){var a,i,o={};return o[c]=t,a=u(e,o),i=f(e,o),{label:a,value:i,index:n}})}var r={},l=angular.extend({},t,i);r.$values=[];var s,u,c,d,p,f,g;return r.init=function(){r.$match=s=a.match(l.regexp),u=e(s[2]||s[1]),c=s[4]||s[6],d=s[5],p=e(s[3]||""),f=e(s[2]?s[1]:c),g=e(s[7])},r.valuesFn=function(t,e){return n.when(g(t,e)).then(function(e){return r.$values=e?o(e,t):{},r.$values})},r.displayValue=function(t){var e={};return e[c]=t,u(e)},r.init(),r}return a}]})}(),angular.module("jb.util.position",[]).factory("$jbPosition",["$document","$window",function(t,e){function n(t,n){return t.currentStyle?t.currentStyle[n]:e.getComputedStyle?e.getComputedStyle(t)[n]:t.style[n]}function a(t){return"static"===(n(t,"position")||"static")}var i=function(e){for(var n=t[0],i=e.offsetParent||n;i&&i!==n&&a(i);)i=i.offsetParent;return i||n};return{position:function(e){var n=this.offset(e),a={top:0,left:0},o=i(e[0]);o!=t[0]&&(a=this.offset(angular.element(o)),a.top+=o.clientTop-o.scrollTop,a.left+=o.clientLeft-o.scrollLeft);var r=e[0].getBoundingClientRect();return{width:r.width||e.prop("offsetWidth"),height:r.height||e.prop("offsetHeight"),top:n.top-a.top,left:n.left-a.left}},offset:function(n){var a=n[0].getBoundingClientRect();return{width:a.width||n.prop("offsetWidth"),height:a.height||n.prop("offsetHeight"),top:a.top+(e.pageYOffset||t[0].documentElement.scrollTop),left:a.left+(e.pageXOffset||t[0].documentElement.scrollLeft)}},positionElements:function(t,e,n,a){var i,o,r,l,s=n.split("-"),u=s[0],c=s[1]||"center";i=a?this.offset(t):this.position(t),o=e.prop("offsetWidth"),r=e.prop("offsetHeight");var d={center:function(){return i.left+i.width/2-o/2},left:function(){return i.left},right:function(){return i.left+i.width}},p={center:function(){return i.top+i.height/2-r/2},top:function(){return i.top},bottom:function(){return i.top+i.height}};switch(u){case"right":l={top:p[c](),left:d[u]()};break;case"left":l={top:p[c](),left:i.left-o};break;case"bottom":l={top:p[u](),left:d[c]()};break;default:l={top:i.top-r,left:d[c]()}}return l}}}]),angular.module("jb.util",["jb.util.dateParser","jb.util.position","jb.util.parseOptions"]),angular.module("jb.be",[]),angular.module("jb.ui").provider("$jbAlert",function(){var t=this.defaults={animation:"am-fade",prefixClass:"alert",prefixEvent:"alert",placement:null,template:"jb/ui/alert/alert.tpl.html",container:!1,element:null,backdrop:!1,keyboard:!0,show:!0,duration:!1,type:!1,dismissable:!0};this.$get=["$timeout","$jbModal",function(e,n){function a(a){var i={},o=angular.extend({},t,a);i=n(o),i.$scope.dismissable=!!o.dismissable,o.type&&(i.$scope.type=o.type);var r=i.show;return o.duration&&(i.show=function(){r(),e(function(){i.hide()},1e3*o.duration)}),i}return a}]}).directive("jbAlert",["$window","$sce","$jbAlert",function(t,e,n){t.requestAnimationFrame||t.setTimeout;return{restrict:"EAC",scope:!0,link:function(t,a,i){var o={scope:t,element:a,show:!1};angular.forEach(["template","placement","keyboard","html","container","animation","duration","dismissable"],function(t){angular.isDefined(i[t])&&(o[t]=i[t])}),angular.forEach(["title","content","type"],function(n){i[n]&&i.$observe(n,function(a){t[n]=e.trustAsHtml(a)})}),i.jbAlert&&t.$watch(i.jbAlert,function(e){angular.isObject(e)?angular.extend(t,e):t.content=e},!0);var r=n(o);a.on(i.trigger||"click",r.toggle),t.$on("$destroy",function(){r&&r.destroy(),o=null,r=null})}}}]),angular.module("jb.ui").provider("$jbAside",function(){var t=this.defaults={animation:"am-fade-and-slide-right",type:"aside",placement:null,template:"jb/ui/aside/aside.tpl.html",contentTemplate:!1,container:!1,element:null,backdrop:!0,keyboard:!0,html:!0,show:!0};this.$get=["$jbModal",function(e){function n(n){var a={},i=angular.extend({},t,n);return a=e(i)}return n}]}).directive("jbAside",["$window","$sce","$jbAside",function(t,e,n){t.requestAnimationFrame||t.setTimeout;return{restrict:"EAC",scope:!0,link:function(t,a,i){var o={scope:t,element:a,show:!1};angular.forEach(["template","contentTemplate","placement","backdrop","keyboard","html","container","animation"],function(t){angular.isDefined(i[t])&&(o[t]=i[t])}),angular.forEach(["title","content"],function(n){i[n]&&i.$observe(n,function(a){t[n]=e.trustAsHtml(a)})}),i.jbAside&&t.$watch(i.jbAside,function(e){angular.isObject(e)?angular.extend(t,e):t.content=e},!0);var r=n(o);a.on(i.trigger||"click",r.toggle),t.$on("$destroy",function(){r&&r.destroy(),o=null,r=null})}}}]),function(){var t=angular.module("jb.ui"),e={activeClass:"active",toggleEvent:"click"};t.directive("jbCheckboxGroup",function(){return{restrict:"A",require:"ngModel",compile:function(t,e){t.attr("data-toggle","buttons"),t.removeAttr("ng-model");var n=t[0].querySelectorAll('input[type="checkbox"]');angular.forEach(n,function(t){var n=angular.element(t);n.attr("jb-checkbox",""),n.attr("ng-model",e.ngModel+"."+n.attr("value"))})}}}),t.directive("jbCheckbox",["$$rAF",function(t){var n=/^(true|false|\d+)$/;return{restrict:"A",require:"ngModel",link:function(a,i,o,r){var l=e,s="INPUT"===i[0].nodeName,u=s?i.parent():i,c=angular.isDefined(o.trueValue)?o.trueValue:!0;n.test(o.trueValue)&&(c=a.$eval(o.trueValue));var d=angular.isDefined(o.falseValue)?o.falseValue:!1;n.test(o.falseValue)&&(d=a.$eval(o.falseValue));var p="boolean"!=typeof c||"boolean"!=typeof d;p&&(r.$parsers.push(function(t){return t?c:d}),r.$formatters.push(function(t){return angular.equals(t,c)}),a.$watch(o.ngModel,function(){r.$render()})),r.$render=function(){var e=angular.equals(r.$modelValue,c);t(function(){s&&(i[0].checked=e),u.toggleClass(l.activeClass,e)})},i.bind(l.toggleEvent,function(){a.$apply(function(){s||r.$setViewValue(!u.hasClass("active")),p||r.$render()})})}}}]),t.directive("jbRadioGroup",function(){return{restrict:"A",require:"ngModel",compile:function(t,e){t.attr("data-toggle","buttons"),t.removeAttr("ng-model");var n=t[0].querySelectorAll('input[type="radio"]');angular.forEach(n,function(t){angular.element(t).attr("jb-radio",""),angular.element(t).attr("ng-model",e.ngModel)})}}}),t.directive("jbRadio",["$$rAF",function(t){var n=/^(true|false|\d+)$/;return{restrict:"A",require:"ngModel",link:function(a,i,o,r){var l,s=e,u="INPUT"===i[0].nodeName,c=u?i.parent():i;o.$observe("value",function(t){l=n.test(t)?a.$eval(t):t,r.$render()}),r.$render=function(){var e=angular.equals(r.$modelValue,l);t(function(){u&&(i[0].checked=e),c.toggleClass(s.activeClass,e)})},i.bind(s.toggleEvent,function(){a.$apply(function(){r.$setViewValue(l),r.$render()})})}}}])}(),angular.module("jb.ui").directive("jbCheckList",function(){return{restrict:"ECA",scope:{jbSrc:"=",jbVal:"=",jbOther:"="},templateUrl:"jb/ui/checkList/checkList.tpl.html",link:function(t){function e(e){var n=[];t.selection=[],e.split(";").forEach(function(e){t.jbSrc.indexOf(e)>-1?t.selection.push(e):t.jbOther&&e&&n.push(e)}),t.otherCk=n.length>0,t.otherVal=n.join(";")}function n(){var e=t.selection;t.jbOther&&t.otherVal&&e.push(t.otherVal),t.jbVal=e.join(";")}if(!angular.isArray(t.jbSrc))throw"jbSrc must be array!";e(t.jbVal),t.toggleOther=function(){t.otherCk=!t.otherCk,t.otherCk||(t.otherVal=""),n()},t.toggleSelection=function(e){var a=t.selection.indexOf(e);a>-1?t.selection.splice(a,1):t.selection.push(e),n()},t.$watch("otherVal",function(e){t.otherCk=!!e,n()}),t.$watch("jbVal",e)}}}),angular.module("jb.ui").provider("$jbDate",function(){var t=this.defaults={animation:"am-fade",prefixClass:"datepicker",placement:"bottom-left",template:"jb/ui/datetime/datepicker.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,useNative:!1,dateType:"date",dateFormat:"yyyy-MM-dd",modelDateFormat:null,dayFormat:"dd",monthFormat:"MMM",yearFormat:"yyyy",monthTitleFormat:"MMMM yyyy",yearTitleFormat:"yyyy",strictFormat:!1,autoclose:!1,minDate:-1/0,maxDate:+1/0,startView:0,minView:0,startWeek:0,daysOfWeekDisabled:"",iconLeft:"glyphicon glyphicon-chevron-left",iconRight:"glyphicon glyphicon-chevron-right"};this.$get=["$window","$document","$rootScope","$sce","$jbDateFormatter","datepickerViews","$jbTip","$timeout",function(e,n,a,i,o,r,l,s){function u(e,n,a){function i(t){t.selected=u.$isSelected(t.date)}function o(){e[0].focus()}var u=l(e,angular.extend({},t,a)),p=a.scope,f=u.$options,g=u.$scope;f.startView&&(f.startView-=f.minView);var m=r(u);u.$views=m.views;var h=m.viewDate;g.$mode=f.startView,g.$iconLeft=f.iconLeft,g.$iconRight=f.iconRight;var b=u.$views[g.$mode];g.$select=function(t){u.select(t)},g.$selectPane=function(t){u.$selectPane(t)},g.$toggleMode=function(){u.setMode((g.$mode+1)%u.$views.length)},u.update=function(t){angular.isDate(t)&&!isNaN(t.getTime())&&(u.$date=t,b.update.call(b,t)),u.$build(!0)},u.updateDisabledDates=function(t){f.disabledDateRanges=t;for(var e=0,n=g.rows.length;n>e;e++)angular.forEach(g.rows[e],u.$setDisabledEl)},u.select=function(t,e){angular.isDate(n.$dateValue)||(n.$dateValue=new Date(t)),!g.$mode||e?(n.$setViewValue(angular.copy(t)),n.$render(),f.autoclose&&!e&&s(function(){u.hide(!0)})):(angular.extend(h,{year:t.getFullYear(),month:t.getMonth(),date:t.getDate()}),u.setMode(g.$mode-1),u.$build())},u.setMode=function(t){g.$mode=t,b=u.$views[g.$mode],u.$build()},u.$build=function(t){t===!0&&b.built||(t!==!1||b.built)&&b.build.call(b)},u.$updateSelected=function(){for(var t=0,e=g.rows.length;e>t;t++)angular.forEach(g.rows[t],i)},u.$isSelected=function(t){return b.isSelected(t)},u.$setDisabledEl=function(t){t.disabled=b.isDisabled(t.date)},u.$selectPane=function(t){var e=b.steps,n=new Date(Date.UTC(h.year+(e.year||0)*t,h.month+(e.month||0)*t,1));angular.extend(h,{year:n.getUTCFullYear(),month:n.getUTCMonth(),date:n.getUTCDate()}),u.$build()},u.$onMouseDown=function(t){if(t.preventDefault(),t.stopPropagation(),d){var e=angular.element(t.target);"button"!==e[0].nodeName.toLowerCase()&&(e=e.parent()),e.triggerHandler("click")}},u.$onKeyDown=function(t){if(/(38|37|39|40|13)/.test(t.keyCode)&&!t.shiftKey&&!t.altKey){if(t.preventDefault(),t.stopPropagation(),13===t.keyCode)return g.$mode?g.$apply(function(){u.setMode(g.$mode-1)}):u.hide(!0);b.onKeyDown(t),p.$digest()}};var $=u.init;u.init=function(){return c&&f.useNative?(e.prop("type","date"),e.css("-webkit-appearance","textfield"),void 0):(d&&(e.prop("type","text"),e.attr("readonly","true"),e.on("click",o)),$(),void 0)};var v=u.destroy;u.destroy=function(){c&&f.useNative&&e.off("click",o),v()};var y=u.show;u.show=function(){y(),s(function(){u.$isShown&&(u.$element.on(d?"touchstart":"mousedown",u.$onMouseDown),f.keyboard&&e.on("keydown",u.$onKeyDown))},0,!1)};var w=u.hide;return u.hide=function(t){u.$isShown&&(u.$element.off(d?"touchstart":"mousedown",u.$onMouseDown),f.keyboard&&e.off("keydown",u.$onKeyDown),w(t))},u}var c=(angular.element(e.document.body),/(ip(a|o)d|iphone|android)/gi.test(e.navigator.userAgent)),d="createTouch"in e.document&&c;return t.lang||(t.lang=o.getDefaultLocale()),u.defaults=t,u}]}).directive("jbDate",["$window","$parse","$q","$jbDateFormatter","$jbDateParser","$jbDate",function(t,e,n,a,i,o){var r=(o.defaults,/(ip(a|o)d|iphone|android)/gi.test(t.navigator.userAgent));return{restrict:"EAC",require:"ngModel",link:function(t,e,n,l){function s(t){return t&&t.length?t:null}function u(t){if(angular.isDate(t)){var e=isNaN(p.$options.minDate)||t.getTime()>=p.$options.minDate,n=isNaN(p.$options.maxDate)||t.getTime()<=p.$options.maxDate,a=e&&n;l.$setValidity("date",a),l.$setValidity("min",e),l.$setValidity("max",n),a&&(l.$dateValue=t)}}function c(){return!l.$dateValue||isNaN(l.$dateValue.getTime())?"":g(l.$dateValue,d.dateFormat)}var d={scope:t,controller:l};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","autoclose","dateType","dateFormat","modelDateFormat","dayFormat","strictFormat","startWeek","startDate","useNative","lang","startView","minView","iconLeft","iconRight","daysOfWeekDisabled","id"],function(t){angular.isDefined(n[t])&&(d[t]=n[t])}),n.bsShow&&t.$watch(n.bsShow,function(t){p&&angular.isDefined(t)&&(angular.isString(t)&&(t=!!t.match(/true|,?(datepicker),?/i)),t===!0?p.show():p.hide())});var p=o(e,l,d);d=p.$options,r&&d.useNative&&(d.dateFormat="yyyy-MM-dd");var f=d.lang,g=function(t,e){return a.formatDate(t,e,f)},m=i({format:d.dateFormat,lang:f,strict:d.strictFormat});angular.forEach(["minDate","maxDate"],function(t){angular.isDefined(n[t])&&n.$observe(t,function(e){p.$options[t]=m.getDateForAttribute(t,e),isNaN(p.$options[t])||p.$build(!1),u(l.$dateValue)})}),t.$watch(n.ngModel,function(){p.update(l.$dateValue)},!0),angular.isDefined(n.disabledDates)&&t.$watch(n.disabledDates,function(t,e){t=s(t),e=s(e),t&&p.updateDisabledDates(t)}),l.$parsers.unshift(function(t){if(!t)return l.$setValidity("date",!0),null;var e=m.parse(t,l.$dateValue);return!e||isNaN(e.getTime())?(l.$setValidity("date",!1),void 0):(u(e),"string"===d.dateType?g(e,d.modelDateFormat||d.dateFormat):"number"===d.dateType?l.$dateValue.getTime():"unix"===d.dateType?l.$dateValue.getTime()/1e3:"iso"===d.dateType?l.$dateValue.toISOString():new Date(l.$dateValue))}),l.$formatters.push(function(t){var e;return e=angular.isUndefined(t)||null===t?0/0:angular.isDate(t)?t:"string"===d.dateType?m.parse(t,null,d.modelDateFormat):"unix"===d.dateType?new Date(1e3*t):new Date(t),l.$dateValue=e,c()}),l.$render=function(){e.val(c())},t.$on("$destroy",function(){p&&p.destroy(),d=null,p=null})}}}]).provider("datepickerViews",function(){function t(t,e){for(var n=[];t.length>0;)n.push(t.splice(0,e));return n}function e(t,e){return(t%e+e)%e}this.defaults={dayFormat:"dd",daySplit:7};this.$get=["$jbDateFormatter","$jbDateParser","$sce",function(n,a,i){return function(o){var r=o.$scope,l=o.$options,s=l.lang,u=function(t,e){return n.formatDate(t,e,s)},c=a({format:l.dateFormat,lang:s,strict:l.strictFormat}),d=n.weekdaysShort(s),p=d.slice(l.startWeek).concat(d.slice(0,l.startWeek)),f=i.trustAsHtml('<th class="dow text-center">'+p.join('</th><th class="dow text-center">')+"</th>"),g=o.$date||(l.startDate?c.getDateForAttribute("startDate",l.startDate):new Date),m={year:g.getFullYear(),month:g.getMonth(),date:g.getDate()},h=(6e4*g.getTimezoneOffset(),[{format:l.dayFormat,split:7,steps:{month:1},update:function(t,e){!this.built||e||t.getFullYear()!==m.year||t.getMonth()!==m.month?(angular.extend(m,{year:o.$date.getFullYear(),month:o.$date.getMonth(),date:o.$date.getDate()}),o.$build()):t.getDate()!==m.date&&(m.date=o.$date.getDate(),o.$updateSelected())},build:function(){var n=new Date(m.year,m.month,1),a=n.getTimezoneOffset(),i=new Date(+n-864e5*e(n.getDay()-l.startWeek,7)),s=i.getTimezoneOffset(),d=(new Date).toDateString();s!==a&&(i=new Date(+i+6e4*(s-a)));for(var p,g=[],h=0;42>h;h++)p=c.daylightSavingAdjust(new Date(i.getFullYear(),i.getMonth(),i.getDate()+h)),g.push({date:p,isToday:p.toDateString()===d,label:u(p,this.format),selected:o.$date&&this.isSelected(p),muted:p.getMonth()!==m.month,disabled:this.isDisabled(p)});r.title=u(n,l.monthTitleFormat),r.showLabels=!0,r.labels=f,r.rows=t(g,this.split),this.built=!0},isSelected:function(t){return o.$date&&t.getFullYear()===o.$date.getFullYear()&&t.getMonth()===o.$date.getMonth()&&t.getDate()===o.$date.getDate()},isDisabled:function(t){var e=t.getTime();if(e<l.minDate||e>l.maxDate)return!0;if(-1!==l.daysOfWeekDisabled.indexOf(t.getDay()))return!0;if(l.disabledDateRanges)for(var n=0;n<l.disabledDateRanges.length;n++)if(e>=l.disabledDateRanges[n].start&&e<=l.disabledDateRanges[n].end)return!0;return!1},onKeyDown:function(t){if(o.$date){var e,n=o.$date.getTime();37===t.keyCode?e=new Date(n-864e5):38===t.keyCode?e=new Date(n-6048e5):39===t.keyCode?e=new Date(n+864e5):40===t.keyCode&&(e=new Date(n+6048e5)),this.isDisabled(e)||o.select(e,!0)}}},{name:"month",format:l.monthFormat,split:4,steps:{year:1},update:function(t){this.built&&t.getFullYear()===m.year?t.getMonth()!==m.month&&(angular.extend(m,{month:o.$date.getMonth(),date:o.$date.getDate()}),o.$updateSelected()):(angular.extend(m,{year:o.$date.getFullYear(),month:o.$date.getMonth(),date:o.$date.getDate()}),o.$build())},build:function(){for(var e,n=(new Date(m.year,0,1),[]),a=0;12>a;a++)e=new Date(m.year,a,1),n.push({date:e,label:u(e,this.format),selected:o.$isSelected(e),disabled:this.isDisabled(e)});r.title=u(e,l.yearTitleFormat),r.showLabels=!1,r.rows=t(n,this.split),this.built=!0},isSelected:function(t){return o.$date&&t.getFullYear()===o.$date.getFullYear()&&t.getMonth()===o.$date.getMonth()},isDisabled:function(t){var e=+new Date(t.getFullYear(),t.getMonth()+1,0);return e<l.minDate||t.getTime()>l.maxDate},onKeyDown:function(t){if(o.$date){var e=o.$date.getMonth(),n=new Date(o.$date);37===t.keyCode?n.setMonth(e-1):38===t.keyCode?n.setMonth(e-4):39===t.keyCode?n.setMonth(e+1):40===t.keyCode&&n.setMonth(e+4),this.isDisabled(n)||o.select(n,!0)}}},{name:"year",format:l.yearFormat,split:4,steps:{year:12},update:function(t,e){!this.built||e||parseInt(t.getFullYear()/20,10)!==parseInt(m.year/20,10)?(angular.extend(m,{year:o.$date.getFullYear(),month:o.$date.getMonth(),date:o.$date.getDate()}),o.$build()):t.getFullYear()!==m.year&&(angular.extend(m,{year:o.$date.getFullYear(),month:o.$date.getMonth(),date:o.$date.getDate()}),o.$updateSelected())},build:function(){for(var e,n=m.year-m.year%(3*this.split),a=[],i=0;12>i;i++)e=new Date(n+i,0,1),a.push({date:e,label:u(e,this.format),selected:o.$isSelected(e),disabled:this.isDisabled(e)});r.title=a[0].label+"-"+a[a.length-1].label,r.showLabels=!1,r.rows=t(a,this.split),this.built=!0},isSelected:function(t){return o.$date&&t.getFullYear()===o.$date.getFullYear()},isDisabled:function(t){var e=+new Date(t.getFullYear()+1,0,0);return e<l.minDate||t.getTime()>l.maxDate},onKeyDown:function(t){if(o.$date){var e=o.$date.getFullYear(),n=new Date(o.$date);37===t.keyCode?n.setYear(e-1):38===t.keyCode?n.setYear(e-4):39===t.keyCode?n.setYear(e+1):40===t.keyCode&&n.setYear(e+4),this.isDisabled(n)||o.select(n,!0)}}}]);return{views:l.minView?Array.prototype.slice.call(h,l.minView):h,viewDate:m}}}]}),angular.module("jb.ui").provider("$jbTime",function(){var t=this.defaults={animation:"am-fade",prefixClass:"timepicker",placement:"bottom-left",template:"jb/ui/datetime/timepicker.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,useNative:!0,timeType:"date",timeFormat:"shortTime",modelTimeFormat:null,autoclose:!1,minTime:-1/0,maxTime:+1/0,length:5,hourStep:1,minuteStep:5,iconUp:"glyphicon glyphicon-chevron-up",iconDown:"glyphicon glyphicon-chevron-down",arrowBehavior:"pager"};this.$get=["$window","$document","$rootScope","$sce","$jbDateFormatter","$jbTip","$timeout",function(e,n,a,i,o,r,l){function s(e,n,a){function i(t,n){if(e[0].createTextRange){var a=e[0].createTextRange();a.collapse(!0),a.moveStart("character",t),a.moveEnd("character",n),a.select()}else e[0].setSelectionRange?e[0].setSelectionRange(t,n):angular.isUndefined(e[0].selectionStart)&&(e[0].selectionStart=t,e[0].selectionEnd=n)
}function s(){e[0].focus()}var d=r(e,angular.extend({},t,a)),p=a.scope,f=d.$options,g=d.$scope,m=f.lang,h=function(t,e){return o.formatDate(t,e,m)},b=0,$=n.$dateValue||new Date,v={hour:$.getHours(),meridian:$.getHours()<12,minute:$.getMinutes(),second:$.getSeconds(),millisecond:$.getMilliseconds()},y=o.getDatetimeFormat(f.timeFormat,m),w=o.hoursFormat(y),j=o.timeSeparator(y),x=o.minutesFormat(y),k=o.showAM(y);g.$iconUp=f.iconUp,g.$iconDown=f.iconDown,g.$select=function(t,e){d.select(t,e)},g.$moveIndex=function(t,e){d.$moveIndex(t,e)},g.$switchMeridian=function(t){d.switchMeridian(t)},d.update=function(t){angular.isDate(t)&&!isNaN(t.getTime())?(d.$date=t,angular.extend(v,{hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds(),millisecond:t.getMilliseconds()}),d.$build()):d.$isBuilt||d.$build()},d.select=function(t,e,a){(!n.$dateValue||isNaN(n.$dateValue.getTime()))&&(n.$dateValue=new Date(1970,0,1)),angular.isDate(t)||(t=new Date(t)),0===e?n.$dateValue.setHours(t.getHours()):1===e&&n.$dateValue.setMinutes(t.getMinutes()),n.$setViewValue(angular.copy(n.$dateValue)),n.$render(),f.autoclose&&!a&&l(function(){d.hide(!0)})},d.switchMeridian=function(t){if(n.$dateValue&&!isNaN(n.$dateValue.getTime())){var e=(t||n.$dateValue).getHours();n.$dateValue.setHours(12>e?e+12:e-12),n.$setViewValue(angular.copy(n.$dateValue)),n.$render()}},d.$build=function(){var t,e,n=g.midIndex=parseInt(f.length/2,10),a=[];for(t=0;t<f.length;t++)e=new Date(1970,0,1,v.hour-(n-t)*f.hourStep),a.push({date:e,label:h(e,w),selected:d.$date&&d.$isSelected(e,0),disabled:d.$isDisabled(e,0)});var i,o=[];for(t=0;t<f.length;t++)i=new Date(1970,0,1,0,v.minute-(n-t)*f.minuteStep),o.push({date:i,label:h(i,x),selected:d.$date&&d.$isSelected(i,1),disabled:d.$isDisabled(i,1)});var r=[];for(t=0;t<f.length;t++)r.push([a[t],o[t]]);g.rows=r,g.showAM=k,g.isAM=(d.$date||a[n].date).getHours()<12,g.timeSeparator=j,d.$isBuilt=!0},d.$isSelected=function(t,e){return d.$date?0===e?t.getHours()===d.$date.getHours():1===e?t.getMinutes()===d.$date.getMinutes():void 0:!1},d.$isDisabled=function(t,e){var n;return 0===e?n=t.getTime()+6e4*v.minute:1===e&&(n=t.getTime()+36e5*v.hour),n<1*f.minTime||n>1*f.maxTime},g.$arrowAction=function(t,e){"picker"===f.arrowBehavior?d.$setTimeByStep(t,e):d.$moveIndex(t,e)},d.$setTimeByStep=function(t,e){{var n=new Date(d.$date),a=n.getHours(),i=(h(n,w).length,n.getMinutes());h(n,x).length}0===e?n.setHours(a-parseInt(f.hourStep,10)*t):n.setMinutes(i-parseInt(f.minuteStep,10)*t),d.select(n,e,!0)},d.$moveIndex=function(t,e){var n;0===e?(n=new Date(1970,0,1,v.hour+t*f.length,v.minute),angular.extend(v,{hour:n.getHours()})):1===e&&(n=new Date(1970,0,1,v.hour,v.minute+t*f.length*f.minuteStep),angular.extend(v,{minute:n.getMinutes()})),d.$build()},d.$onMouseDown=function(t){if("input"!==t.target.nodeName.toLowerCase()&&t.preventDefault(),t.stopPropagation(),c){var e=angular.element(t.target);"button"!==e[0].nodeName.toLowerCase()&&(e=e.parent()),e.triggerHandler("click")}},d.$onKeyDown=function(t){if(/(38|37|39|40|13)/.test(t.keyCode)&&!t.shiftKey&&!t.altKey){if(t.preventDefault(),t.stopPropagation(),13===t.keyCode)return d.hide(!0);var e=new Date(d.$date),n=e.getHours(),a=h(e,w).length,o=e.getMinutes(),r=h(e,x).length,l=/(37|39)/.test(t.keyCode),s=2+1*k;l&&(37===t.keyCode?b=1>b?s-1:b-1:39===t.keyCode&&(b=s-1>b?b+1:0));var u=[0,a];0===b?(38===t.keyCode?e.setHours(n-parseInt(f.hourStep,10)):40===t.keyCode&&e.setHours(n+parseInt(f.hourStep,10)),a=h(e,w).length,u=[0,a]):1===b?(38===t.keyCode?e.setMinutes(o-parseInt(f.minuteStep,10)):40===t.keyCode&&e.setMinutes(o+parseInt(f.minuteStep,10)),r=h(e,x).length,u=[a+1,a+1+r]):2===b&&(l||d.switchMeridian(),u=[a+1+r+1,a+1+r+3]),d.select(e,b,!0),i(u[0],u[1]),p.$digest()}};var D=d.init;d.init=function(){return u&&f.useNative?(e.prop("type","time"),e.css("-webkit-appearance","textfield"),void 0):(c&&(e.prop("type","text"),e.attr("readonly","true"),e.on("click",s)),D(),void 0)};var T=d.destroy;d.destroy=function(){u&&f.useNative&&e.off("click",s),T()};var S=d.show;d.show=function(){S(),l(function(){d.$element.on(c?"touchstart":"mousedown",d.$onMouseDown),f.keyboard&&e.on("keydown",d.$onKeyDown)},0,!1)};var M=d.hide;return d.hide=function(t){d.$isShown&&(d.$element.off(c?"touchstart":"mousedown",d.$onMouseDown),f.keyboard&&e.off("keydown",d.$onKeyDown),M(t))},d}var u=(angular.element(e.document.body),/(ip(a|o)d|iphone|android)/gi.test(e.navigator.userAgent)),c="createTouch"in e.document&&u;return t.lang||(t.lang=o.getDefaultLocale()),s.defaults=t,s}]}).directive("jbTime",["$window","$parse","$q","$jbDateFormatter","$jbDateParser","$jbTime",function(t,e,n,a,i,o){{var r=o.defaults,l=/(ip(a|o)d|iphone|android)/gi.test(t.navigator.userAgent);t.requestAnimationFrame||t.setTimeout}return{restrict:"EAC",require:"ngModel",link:function(t,e,n,s){function u(t){if(angular.isDate(t)){var e=isNaN(d.minTime)||new Date(t.getTime()).setFullYear(1970,0,1)>=d.minTime,n=isNaN(d.maxTime)||new Date(t.getTime()).setFullYear(1970,0,1)<=d.maxTime,a=e&&n;s.$setValidity("date",a),s.$setValidity("min",e),s.$setValidity("max",n),a&&(s.$dateValue=t)}}function c(){return!s.$dateValue||isNaN(s.$dateValue.getTime())?"":g(s.$dateValue,d.timeFormat)}var d={scope:t,controller:s};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","autoclose","timeType","timeFormat","modelTimeFormat","useNative","hourStep","minuteStep","length","arrowBehavior","iconUp","iconDown","id"],function(t){angular.isDefined(n[t])&&(d[t]=n[t])}),n.bsShow&&t.$watch(n.bsShow,function(t){p&&angular.isDefined(t)&&(angular.isString(t)&&(t=!!t.match(/true|,?(timepicker),?/i)),t===!0?p.show():p.hide())}),l&&(d.useNative||r.useNative)&&(d.timeFormat="HH:mm");var p=o(e,s,d);d=p.$options;var f=d.lang,g=function(t,e){return a.formatDate(t,e,f)},m=i({format:d.timeFormat,lang:f});angular.forEach(["minTime","maxTime"],function(t){angular.isDefined(n[t])&&n.$observe(t,function(e){p.$options[t]=m.getTimeForAttribute(t,e),isNaN(p.$options[t])||p.$build(),u(s.$dateValue)})}),t.$watch(n.ngModel,function(){p.update(s.$dateValue)},!0),s.$parsers.unshift(function(t){if(!t)return s.$setValidity("date",!0),null;var e=angular.isDate(t)?t:m.parse(t,s.$dateValue);return!e||isNaN(e.getTime())?(s.$setValidity("date",!1),void 0):(u(e),"string"===d.timeType?g(e,d.modelTimeFormat||d.timeFormat):"number"===d.timeType?s.$dateValue.getTime():"unix"===d.timeType?s.$dateValue.getTime()/1e3:"iso"===d.timeType?s.$dateValue.toISOString():new Date(s.$dateValue))}),s.$formatters.push(function(t){var e;return e=angular.isUndefined(t)||null===t?0/0:angular.isDate(t)?t:"string"===d.timeType?m.parse(t,null,d.modelTimeFormat):"unix"===d.timeType?new Date(1e3*t):new Date(t),s.$dateValue=e,c()}),s.$render=function(){e.val(c())},t.$on("$destroy",function(){p&&p.destroy(),d=null,p=null})}}}]),angular.module("jb.ui").directive("draggable",function(){return{scope:{dragType:"=",dragVal:"="},link:function(t,e){var n=e[0];n.draggable=!0,n.addEventListener("dragstart",function(e){return e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("Type",t.dragType),e.dataTransfer.setData("Val",t.dragVal),this.classList.add("drag"),!1},!1),n.addEventListener("dragend",function(){return this.classList.remove("drag"),!1},!1)}}}).directive("droppable",function(){return{scope:{drop:"&",dropVal:"="},link:function(t,e){var n=e[0];n.addEventListener("dragover",function(t){return t.dataTransfer.dropEffect="move",t.preventDefault&&t.preventDefault(),this.classList.add("over"),!1},!1),n.addEventListener("dragenter",function(){return this.classList.add("over"),!1},!1),n.addEventListener("dragleave",function(){return this.classList.remove("over"),!1},!1),n.addEventListener("drop",function(e){e.stopPropagation&&e.stopPropagation(),this.classList.remove("over");var n=e.dataTransfer.getData("Val");return t.$apply(function(t){var e=t.drop();"undefined"!=typeof e&&e(n,t.dropVal)}),!1},!1)}}}),angular.module("jb.ui").provider("$jbDropdown",function(){var t=this.defaults={animation:"am-fade",prefixClass:"dropdown",placement:"bottom-left",template:"jb/ui/dropdown/dropdown.tpl.html",trigger:"click",container:!1,keyboard:!0,html:!0,delay:0};this.$get=["$window","$rootScope","$jbTip","$timeout",function(e,n,a,i){function o(e,o){function s(t){return t.target!==e[0]?t.target!==e[0]&&u.hide():void 0}{var u={},c=angular.extend({},t,o);u.$scope=c.scope&&c.scope.$new()||n.$new()}u=a(e,c);var d=e.parent();u.$onKeyDown=function(t){if(/(38|40)/.test(t.keyCode)){t.preventDefault(),t.stopPropagation();var e=angular.element(u.$element[0].querySelectorAll("li:not(.divider) a"));if(e.length){var n;angular.forEach(e,function(t,e){l&&l.call(t,":focus")&&(n=e)}),38===t.keyCode&&n>0?n--:40===t.keyCode&&n<e.length-1?n++:angular.isUndefined(n)&&(n=0),e.eq(n)[0].focus()}}};var p=u.show;u.show=function(){p(),i(function(){c.keyboard&&u.$element.on("keydown",u.$onKeyDown),r.on("click",s)},0,!1),d.hasClass("dropdown")&&d.addClass("open")};var f=u.hide;u.hide=function(){u.$isShown&&(c.keyboard&&u.$element.off("keydown",u.$onKeyDown),r.off("click",s),d.hasClass("dropdown")&&d.removeClass("open"),f())};var g=u.destroy;return u.destroy=function(){r.off("click",s),g()},u}var r=angular.element(e.document.body),l=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector;return o}]}).directive("jbDropdown",["$window","$sce","$jbDropdown",function(t,e,n){return{restrict:"EAC",scope:!0,link:function(t,e,a){var i={scope:t};angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","id"],function(t){angular.isDefined(a[t])&&(i[t]=a[t])}),a.jbDropdown&&t.$watch(a.jbDropdown,function(e){t.content=e},!0),a.bsShow&&t.$watch(a.bsShow,function(t){o&&angular.isDefined(t)&&(angular.isString(t)&&(t=!!t.match(/true|,?(dropdown),?/i)),t===!0?o.show():o.hide())});var o=n(e,i);t.$on("$destroy",function(){o&&o.destroy(),i=null,o=null})}}}]),angular.module("jb.ui").directive("jbDropdownToggle",["$document","$location",function(t){var e=null,n=angular.noop;return{restrict:"CA",link:function(a,i){a.$watch("$location.path",function(){n()}),i.parent().bind("click",function(){n()}),i.bind("click",function(a){var o=i===e;a.preventDefault(),a.stopPropagation(),e&&n(),o||i.hasClass("disabled")||i.prop("disabled")||(i.parent().addClass("open"),e=i,n=function(a){a&&(a.preventDefault(),a.stopPropagation()),t.unbind("click",n),i.parent().removeClass("open"),n=angular.noop,e=null},t.bind("click",n))})}}}]),function(){var t=angular.module("jb.ui");t.directive("jbFormGroup",function(){return{restrict:"EA",replace:!0,templateUrl:"jb/ui/form/fg.tpl.html",scope:{lb:"@jbLb",ip:"=jbIp"}}}),t.directive("jbFormGroupH",["$jb",function(){return{restrict:"EA",transclude:!0,replace:!0,templateUrl:function(t,e){return e.jbCount?"jb/ui/form/fgh2.tpl.html":"jb/ui/form/fgh.tpl.html"},scope:{lb:"=jbLb",w:"=jbWidth",count:"=?jbCount"},link:function(t){t.w0="col-sm-"+t.w[0],t.w1="col-sm-"+t.w[1],t.count&&(t.w2="col-sm-"+t.w[2],t.w3="col-sm-"+t.w[3])}}}])}(),angular.module("jb.ui").directive("jbInputGroupDropdownBtn",function(){return{restrict:"ECA",scope:{jbSrc:"=",jbVal:"="},replace:!0,templateUrl:"jb/ui/inputGroupDropdownBtn/inputGroupDropdownBtn.tpl.html",link:function(t){if(!Array.isArray(t.jbSrc))throw"jbSrc must be array!";t.update=function(e){t.jbVal=e}}}}),angular.module("jb.ui").provider("$jbModal",function(){var t=this.defaults={type:"modal",size:null,placement:"center",template:"jb/ui/modal/modal.tpl.html",contentTemplate:!1,element:null,backdrop:!0,keyboard:!0,html:!0,show:!0};this.$get=["$window","$rootScope","$sce","$compile","$templateCache","$animate",function(e,n,a,i,o,r){function l(e){function l(t){t.target===t.currentTarget&&("static"===b.backdrop?h.focus():h.hide())}function f(){$.$emit(b.type+".hide",h),d.removeClass("modal-open"),b.animation&&d.removeClass(b.type+"-with-"+b.animation)}var g,m,h={},b=h.$options=angular.extend({},t,e),$=h.$scope=b.scope&&b.scope.$new()||n.$new();angular.forEach(["title","content"],function(t){b[t]&&($[t]=a.trustAsHtml(b[t]))}),$.$hide=function(){$.$$postDigest(function(){h.hide()})},$.$show=function(){$.$$postDigest(function(){h.show()})},$.$toggle=function(){$.$$postDigest(function(){h.toggle()})},h.$isShown=$.$isShown=!1,h.$size=$.$size=b.size,h.$placement=$.$placement=b.placement,h.init=function(){b.show&&$.$$postDigest(function(){h.show()})},h.destroy=function(){g&&(g.remove(),g=null),$.$destroy()},h.show=function(){if(!h.$isShown){var t,e;t=d,e=t[0].lastChild?angular.element(t[0].lastChild):null,g=h.$element=y($,function(){}),g.css({display:"block"}),r.enter(g,t,e),h.$isShown=$.$isShown=!0,s($),d.addClass("modal-open");var n=g[0];n.focus(),b.backdrop&&(m=angular.element(g.children()[0]),g.on("click",l),m.on("click",l),m.on("wheel",u)),b.keyboard&&g.on("keyup",h.$onKeyUp)}},h.hide=function(){if(h.$isShown){var t=r.leave(g,f);t&&t.then&&t.then(f),h.$isShown=$.$isShown=!1,s($),b.backdrop&&(g.off("click",l),m.off("click",l),m.off("wheel",u)),b.keyboard&&g.off("keyup",h.$onKeyUp)}},h.toggle=function(){h.$isShown?h.hide():h.show()},h.focus=function(){g[0].focus()},h.$onKeyUp=function(t){27===t.which&&h.$isShown&&(h.hide(),t.stopPropagation())};var v=o.get(b.template);b.html&&(v=v.replace(p,'ng-bind-html="')),v=c.apply(v);var y=i(v);return h.init(),h}function s(t){t.$$phase||t.$root&&t.$root.$$phase||t.$digest()}function u(t){t.preventDefault()}var c=String.prototype.trim,d=angular.element(e.document.body),p=/ng-bind="/gi;return l}]}).directive("jbModal",["$window","$sce","$jbModal",function(t,e,n){return{restrict:"EAC",scope:!0,link:function(t,a,i){var o={scope:t,element:a,show:!1};angular.forEach(["template","contentTemplate","placement","size","backdrop","keyboard","html","container","animation","id"],function(t){angular.isDefined(i[t])&&(o[t]=i[t])}),angular.forEach(["title","content"],function(n){i[n]&&i.$observe(n,function(a){t[n]=e.trustAsHtml(a)})}),i.jbModal&&t.$watch(i.jbModal,function(e){angular.isObject(e)?angular.extend(t,e):t.content=e},!0);var r=n(o);a.on(i.trigger||"click",r.toggle),t.$on("$destroy",function(){r&&r.destroy(),o=null,r=null})}}}]),angular.module("jb.ui").controller("PaginationController",["$scope","$attrs","$parse","$interpolate",function(t,e,n,a){var i=this,o=e.numPages?n(e.numPages).assign:angular.noop;this.init=function(a){e.itemsPerPage?t.$parent.$watch(n(e.itemsPerPage),function(e){i.itemsPerPage=parseInt(e,10),t.totalPages=i.calculateTotalPages()}):this.itemsPerPage=a},this.noPrevious=function(){return 1===this.page},this.noNext=function(){return this.page===t.totalPages},this.isActive=function(t){return this.page===t},this.calculateTotalPages=function(){var e=this.itemsPerPage<1?1:Math.ceil(t.totalItems/this.itemsPerPage);return Math.max(e||0,1)},this.getAttributeValue=function(e,n,i){return angular.isDefined(e)?i?a(e)(t.$parent):t.$parent.$eval(e):n},this.render=function(){this.page=parseInt(t.page,10)||1,this.page>0&&this.page<=t.totalPages&&(t.pages=this.getPages(this.page,t.totalPages))},t.selectPage=function(e){!i.isActive(e)&&e>0&&e<=t.totalPages&&(t.page=e,t.onSelectPage({page:e}))},t.$watch("page",function(){i.render()}),t.$watch("totalItems",function(){t.totalPages=i.calculateTotalPages()}),t.$watch("totalPages",function(e){o(t.$parent,e),i.page>e?t.selectPage(e):i.render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("jbPagination",["$parse","paginationConfig",function(t,e){return{restrict:"EA",scope:{page:"=",totalItems:"=",onSelectPage:" &"},controller:"PaginationController",templateUrl:"jb/ui/pager/pagination.tpl.html",replace:!0,link:function(n,a,i,o){function r(t,e,n,a){return{number:t,text:e,active:n,disabled:a}}var l,s=o.getAttributeValue(i.boundaryLinks,e.boundaryLinks),u=o.getAttributeValue(i.directionLinks,e.directionLinks),c=o.getAttributeValue(i.firstText,e.firstText,!0),d=o.getAttributeValue(i.previousText,e.previousText,!0),p=o.getAttributeValue(i.nextText,e.nextText,!0),f=o.getAttributeValue(i.lastText,e.lastText,!0),g=o.getAttributeValue(i.rotate,e.rotate);o.init(e.itemsPerPage),i.maxSize&&n.$parent.$watch(t(i.maxSize),function(t){l=parseInt(t,10),o.render()}),o.getPages=function(t,e){var n=[],a=1,i=e,m=angular.isDefined(l)&&e>l;m&&(g?(a=Math.max(t-Math.floor(l/2),1),i=a+l-1,i>e&&(i=e,a=i-l+1)):(a=(Math.ceil(t/l)-1)*l+1,i=Math.min(a+l-1,e)));for(var h=a;i>=h;h++){var b=r(h,h,o.isActive(h),!1);n.push(b)}if(m&&!g){if(a>1){var $=r(a-1,"...",!1,!1);n.unshift($)}if(e>i){var v=r(i+1,"...",!1,!1);n.push(v)}}if(u){var y=r(t-1,d,!1,o.noPrevious());n.unshift(y);var w=r(t+1,p,!1,o.noNext());n.push(w)}if(s){var j=r(1,c,!1,o.noPrevious());n.unshift(j);var x=r(e,f,!1,o.noNext());n.push(x)}return n}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("jbPager",["pagerConfig",function(t){return{restrict:"EA",scope:{page:"=",totalItems:"=",onSelectPage:" &"},controller:"PaginationController",templateUrl:"jb/ui/pager/pager.tpl.html",replace:!0,link:function(e,n,a,i){function o(t,e,n,a,i){return{number:t,text:e,disabled:n,previous:s&&a,next:s&&i}}var r=i.getAttributeValue(a.previousText,t.previousText,!0),l=i.getAttributeValue(a.nextText,t.nextText,!0),s=i.getAttributeValue(a.align,t.align);i.init(t.itemsPerPage),i.getPages=function(t){return[o(t-1,r,i.noPrevious(),!0,!1),o(t+1,l,i.noNext(),!1,!0)]}}}}]),angular.module("jb.ui").provider("$jbPop",function(){var t=this.defaults={animation:"am-fade",customClass:"",container:!1,target:!1,placement:"right",template:"jb/ui/popover/popover.tpl.html",contentTemplate:!1,trigger:"click",keyboard:!0,html:!0,title:"",content:"",delay:0,autoClose:!1};this.$get=["$jbTip",function(e){function n(n,a){var i=angular.extend({},t,a),o=e(n,i);return i.content&&(o.$scope.content=i.content),o}return n}]}).directive("jbPop",["$window","$sce","$jbPop",function(t,e,n){var a=t.requestAnimationFrame||t.setTimeout;return{restrict:"EAC",scope:!0,link:function(t,i,o){var r={scope:t};angular.forEach(["template","contentTemplate","placement","container","target","delay","trigger","keyboard","html","animation","customClass","autoClose","id"],function(t){angular.isDefined(o[t])&&(r[t]=o[t])}),angular.forEach(["title","content"],function(n){o[n]&&o.$observe(n,function(i,o){t[n]=e.trustAsHtml(i),angular.isDefined(o)&&a(function(){l&&l.$applyPlacement()})})}),o.jbPop&&t.$watch(o.jbPop,function(e,n){angular.isObject(e)?angular.extend(t,e):t.content=e,angular.isDefined(n)&&a(function(){l&&l.$applyPlacement()})},!0),o.bsShow&&t.$watch(o.bsShow,function(t){l&&angular.isDefined(t)&&(angular.isString(t)&&(t=!!t.match(/true|,?(popover),?/i)),t===!0?l.show():l.hide())});var l=n(i,r);t.$on("$destroy",function(){l&&l.destroy(),r=null,l=null})}}}]),angular.module("jb.ui").directive("jbRadioList",["$parse",function(){return{restrict:"ECA",scope:{jbSrc:"=",jbVal:"=",jbOther:"="},templateUrl:"jb/ui/radioList/radioList.tpl.html",link:function(t){function e(e){e&&(t.jbSrc.indexOf(e)>-1?t.selection=e:t.jbOther?(t.selection="other",t.otherVal=e):(t.selection="",t.otherVal=""))}function n(){t.jbVal="other"===t.selection?t.otherVal:t.selection}if(!angular.isArray(t.jbSrc))throw"jbSrc must be array!";t.selection="",t.otherVal="",e(t.jbVal),t.select=function(e){t.selection=e,"other"!==e&&(t.otherVal=""),n()},t.$watch("otherVal",function(e){e&&(t.selection="other"),n()}),t.$watch("jbVal",e)}}}]),function(){var t=angular.module("jb.ui");t.provider("$jbSelect",function(){var t=this.defaults={animation:"am-fade",prefixClass:"select",prefixEvent:"$select",placement:"bottom-left",template:"jb/ui/select/select.tpl.html",trigger:"focus",container:!1,keyboard:!0,html:!1,delay:0,multiple:!1,allNoneButtons:!1,sort:!0,caretHtml:'&nbsp;<span class="caret"></span>',placeholder:"下拉选择",allText:"All",noneText:"None",maxLength:3,maxLengthHtml:"selected",iconCheckmark:"glyphicon glyphicon-ok"};this.$get=["$window","$document","$rootScope","$jbTip","$timeout",function(e,n,a,i,o){function r(e,n,a){var r={},l=angular.extend({},t,a);l.sort=l.sort.toString().match(/true|1/i),r=i(e,l);var u=r.$scope;u.$matches=[],u.$activeIndex=-1,u.$isMultiple=l.multiple,u.$showAllNoneButtons=l.allNoneButtons&&l.multiple,u.$iconCheckmark=l.iconCheckmark,u.$allText=l.allText,u.$noneText=l.noneText,u.$activate=function(t){u.$$postDigest(function(){r.activate(t)})},u.$select=function(t){u.$$postDigest(function(){r.select(t)})},u.$isVisible=function(){return r.$isVisible()},u.$isActive=function(t){return r.$isActive(t)},u.$selectAll=function(){for(var t=0;t<u.$matches.length;t++)u.$isActive(t)||u.$select(t)},u.$selectNone=function(){for(var t=0;t<u.$matches.length;t++)u.$isActive(t)&&u.$select(t)},r.update=function(t){u.$matches=t,r.$updateActiveIndex()},r.activate=function(t){return l.multiple?(r.$isActive(t)?u.$activeIndex.splice(u.$activeIndex.indexOf(t),1):u.$activeIndex.push(t),l.sort&&u.$activeIndex.sort()):u.$activeIndex=t,u.$activeIndex},r.select=function(t){var e=u.$matches[t].value;u.$apply(function(){r.activate(t),l.multiple?n.$setViewValue(u.$activeIndex.map(function(t){return u.$matches[t].value})):(n.$setViewValue(e),r.hide())}),u.$emit(l.prefixEvent+".select",e,t,r)},r.$updateActiveIndex=function(){n.$modelValue&&u.$matches.length?u.$activeIndex=l.multiple&&angular.isArray(n.$modelValue)?n.$modelValue.map(function(t){return r.$getIndex(t)}):r.$getIndex(n.$modelValue):u.$activeIndex>=u.$matches.length&&(u.$activeIndex=l.multiple?[]:0)},r.$isVisible=function(){return l.minLength&&n?u.$matches.length&&n.$viewValue.length>=l.minLength:u.$matches.length},r.$isActive=function(t){return l.multiple?-1!==u.$activeIndex.indexOf(t):u.$activeIndex===t},r.$getIndex=function(t){var e=u.$matches.length,n=e;if(e){for(n=e;n--&&u.$matches[n].value!==t;);if(!(0>n))return n}},r.$onMouseDown=function(t){if(t.preventDefault(),t.stopPropagation(),s){var e=angular.element(t.target);e.triggerHandler("click")}},r.$onKeyDown=function(t){return/(9|13|38|40)/.test(t.keyCode)?(t.preventDefault(),t.stopPropagation(),l.multiple&&9===t.keyCode?r.hide():l.multiple||13!==t.keyCode&&9!==t.keyCode?(l.multiple||(38===t.keyCode&&u.$activeIndex>0?u.$activeIndex--:38===t.keyCode&&u.$activeIndex<0?u.$activeIndex=u.$matches.length-1:40===t.keyCode&&u.$activeIndex<u.$matches.length-1?u.$activeIndex++:angular.isUndefined(u.$activeIndex)&&(u.$activeIndex=0),u.$digest()),void 0):r.select(u.$activeIndex)):void 0};var c=r.show;r.show=function(){c(),l.multiple&&r.$element.addClass("select-multiple"),o(function(){r.$element.on(s?"touchstart":"mousedown",r.$onMouseDown),l.keyboard&&e.on("keydown",r.$onKeyDown)},0,!1)};var d=r.hide;return r.hide=function(){l.multiple||n.$modelValue||(u.$activeIndex=-1),r.$element.off(s?"touchstart":"mousedown",r.$onMouseDown),l.keyboard&&e.off("keydown",r.$onKeyDown),d(!0)},r}var l=(angular.element(e.document.body),/(ip(a|o)d|iphone|android)/gi.test(e.navigator.userAgent)),s="createTouch"in e.document&&l;return r.defaults=t,r}]}),t.directive("jbSelect",["$window","$parse","$q","$jbSelect","$jbParseOptions",function(t,e,n,a,i){var o=a.defaults;return{restrict:"EAC",require:"ngModel",link:function(t,e,n,r){var l={scope:t,placeholder:o.placeholder};if(angular.forEach(["placement","container","delay","trigger","keyboard","html","animation","template","placeholder","multiple","allNoneButtons","maxLength","maxLengthHtml","allText","noneText","iconCheckmark","autoClose","id","sort","caretHtml"],function(t){angular.isDefined(n[t])&&(l[t]=n[t])}),"select"===e[0].nodeName.toLowerCase()){var s=e;s.css("display","none"),e=angular.element('<button type="button" class="btn btn-default"></button>'),s.after(e)}var u=i(n.jbOptions),c=a(e,r,l),d=u.$match[7].replace(/\|.+/,"").trim();t.$watch(d,function(){u.valuesFn(t,r).then(function(t){c.update(t),r.$render()})},!0),t.$watch(n.ngModel,function(){c.$updateActiveIndex(),r.$render()},!0),r.$render=function(){var t,n;l.multiple&&angular.isArray(r.$modelValue)?(t=r.$modelValue.map(function(t){return n=c.$getIndex(t),angular.isDefined(n)?c.$scope.$matches[n].label:!1}).filter(angular.isDefined),t=t.length>(l.maxLength||o.maxLength)?t.length+" "+(l.maxLengthHtml||o.maxLengthHtml):t.join(", ")):(n=c.$getIndex(r.$modelValue),t=angular.isDefined(n)?c.$scope.$matches[n].label:!1),e.html((t?t:l.placeholder)+(l.caretHtml?l.caretHtml:o.caretHtml))},l.multiple&&(r.$isEmpty=function(t){return!t||0===t.length}),t.$on("$destroy",function(){c&&c.destroy(),l=null,c=null})}}}])}(),function(t){t.module("jb.ui.table",["jb.filter"])}(angular),angular.module("jb.ui").provider("$jbTip",function(){var t=this.defaults={animation:"am-fade",customClass:"",prefixClass:"tooltip",prefixEvent:"tooltip",container:!1,target:!1,placement:"top",template:"jb/ui/tooltip/tooltip.tpl.html",contentTemplate:!1,trigger:"hover focus",keyboard:!1,html:!0,show:!1,title:"",type:"",delay:0,autoClose:!1,bsEnabled:!0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","$sce","$$rAF","$timeout","$jbPosition",function(e,n,a,i,o,r,l,s,u,c,d){function p(e,i){function o(){V.$emit(P.prefixEvent+".show",A)}function r(){if(V.$emit(P.prefixEvent+".hide",A),L===Y){if(q&&"focus"===P.trigger)return e[0].blur();C()}}function p(){var t=P.trigger.split(" ");angular.forEach(t,function(t){"click"===t?e.on("click",A.toggle):"manual"!==t&&(e.on("hover"===t?"mouseenter":"focus",A.enter),e.on("hover"===t?"mouseleave":"blur",A.leave),"button"===E&&"hover"!==t&&e.on(b?"touchstart":"mousedown",A.$onFocusElementMouseDown))})}function y(){for(var t=P.trigger.split(" "),n=t.length;n--;){var a=t[n];"click"===a?e.off("click",A.toggle):"manual"!==a&&(e.off("hover"===a?"mouseenter":"focus",A.enter),e.off("hover"===a?"mouseleave":"blur",A.leave),"button"===E&&"hover"!==a&&e.off(b?"touchstart":"mousedown",A.$onFocusElementMouseDown))}}function w(){"focus"!==P.trigger?L.on("keyup",A.$onKeyUp):e.on("keyup",A.$onFocusKeyUp)}function j(){"focus"!==P.trigger?L.off("keyup",A.$onKeyUp):e.off("keyup",A.$onFocusKeyUp)}function x(){c(function(){L.on("click",D),v.on("click",A.hide),_=!0},0,!1)}function k(){_&&(L.off("click",D),v.off("click",A.hide),_=!1)}function D(t){t.stopPropagation()}function T(t){t=t||P.target||e;var n=t[0],a=n.getBoundingClientRect(),i={};for(var o in a)a.hasOwnProperty(o)&&(i[o]=a[o]);null===a.width&&(i=angular.extend({},i,{width:a.right-a.left,height:a.bottom-a.top}));var r={};return r="body"===P.container?d.offset(t):d.position(t),angular.extend({},i,r)}function S(t,e,n,a){var i,o=t.split("-");switch(o[0]){case"right":i={top:e.top+e.height/2-a/2,left:e.left+e.width};break;case"bottom":i={top:e.top+e.height,left:e.left+e.width/2-n/2};break;case"left":i={top:e.top+e.height/2-a/2,left:e.left-n};break;default:i={top:e.top-a,left:e.left+e.width/2-n/2}}if(!o[1])return i;if("top"===o[0]||"bottom"===o[0])switch(o[1]){case"left":i.left=e.left;break;case"right":i.left=e.left+e.width-n}else if("left"===o[0]||"right"===o[0])switch(o[1]){case"top":i.top=e.top-a;break;case"bottom":i.top=e.top+e.height}return i}function M(t,e){L.css({top:t+"px",left:e+"px"})}function C(){clearTimeout(I),A.$isShown&&null!==L&&(P.autoClose&&k(),P.keyboard&&j()),U&&(U.$destroy(),U=null),L&&(L.remove(),L=A.$element=null)}var A={},E=e[0].nodeName.toLowerCase(),P=A.$options=angular.extend({},t,i);A.$promise=m(P.template);var V=A.$scope=P.scope&&P.scope.$new()||n.$new();if(P.delay&&angular.isString(P.delay)){var F=P.delay.split(",").map(parseFloat);P.delay=F.length>1?{show:F[0],hide:F[1]}:F[0]}A.$id=P.id||e.attr("id")||"",P.title&&(V.title=s.trustAsHtml(P.title)),V.$setEnabled=function(t){V.$$postDigest(function(){A.setEnabled(t)})},V.$hide=function(){V.$$postDigest(function(){A.hide()})},V.$show=function(){V.$$postDigest(function(){A.show()})},V.$toggle=function(){V.$$postDigest(function(){A.toggle()})},A.$isShown=V.$isShown=!1;var I,O;P.contentTemplate&&(A.$promise=A.$promise.then(function(t){var e=angular.element(t);return m(P.contentTemplate).then(function(t){var n=g('[ng-bind="content"]',e[0]);return n.length||(n=g('[ng-bind="title"]',e[0])),n.removeAttr("ng-bind").html(t),e[0].outerHTML})}));var N,L,R,H,U;A.$promise.then(function(t){angular.isObject(t)&&(t=t.data),P.html&&(t=t.replace($,'ng-bind-html="')),t=h.apply(t),R=t,N=a(t),A.init()}),A.init=function(){P.delay&&angular.isNumber(P.delay)&&(P.delay={show:P.delay,hide:P.delay}),"self"===P.container?H=e:angular.isElement(P.container)?H=P.container:P.container&&(H=g(P.container)),p(),P.target&&(P.target=angular.isElement(P.target)?P.target:g(P.target)),P.show&&V.$$postDigest(function(){"focus"===P.trigger?e[0].focus():A.show()})},A.destroy=function(){y(),C(),V.$destroy()},A.enter=function(){return clearTimeout(I),O="in",P.delay&&P.delay.show?(I=setTimeout(function(){"in"===O&&A.show()},P.delay.show),void 0):A.show()},A.show=function(){if(P.bsEnabled&&!A.$isShown){V.$emit(P.prefixEvent+".show.before",A);var t,n;P.container?(t=H,n=H[0].lastChild?angular.element(H[0].lastChild):null):(t=null,n=e),L&&C(),U=A.$scope.$new(),L=A.$element=N(U,function(){}),L.css({top:"-9999px",left:"-9999px",display:"block",visibility:"hidden"}),P.animation&&L.addClass(P.animation),P.type&&L.addClass(P.prefixClass+"-"+P.type),P.customClass&&L.addClass(P.customClass);var a=l.enter(L,t,n,o);a&&a.then&&a.then(o),A.$isShown=V.$isShown=!0,f(V),u(function(){A.$applyPlacement(),L&&L.css({visibility:"visible"})}),P.keyboard&&("focus"!==P.trigger&&A.focus(),w()),P.autoClose&&x()}},A.leave=function(){return clearTimeout(I),O="out",P.delay&&P.delay.hide?(I=setTimeout(function(){"out"===O&&A.hide()},P.delay.hide),void 0):A.hide()};var q,Y;A.hide=function(t){if(A.$isShown){V.$emit(P.prefixEvent+".hide.before",A),q=t,Y=L;var e=l.leave(L,r);e&&e.then&&e.then(r),A.$isShown=V.$isShown=!1,f(V),P.keyboard&&null!==L&&j(),P.autoClose&&null!==L&&k()}},A.toggle=function(){A.$isShown?A.leave():A.enter()},A.focus=function(){L[0].focus()},A.setEnabled=function(t){P.bsEnabled=t},A.$applyPlacement=function(){if(L){var n=P.placement,a=/\s?auto?\s?/i,i=a.test(n);i&&(n=n.replace(a,"")||t.placement),L.addClass(P.placement);var o=T(),r=L.prop("offsetWidth"),l=L.prop("offsetHeight");if(i){var s=n,u=P.container?angular.element(document.querySelector(P.container)):e.parent(),c=T(u);s.indexOf("bottom")>=0&&o.bottom+l>c.bottom?n=s.replace("bottom","top"):s.indexOf("top")>=0&&o.top-l<c.top&&(n=s.replace("top","bottom")),("right"===s||"bottom-left"===s||"top-left"===s)&&o.right+r>c.width?n="right"===s?"left":n.replace("left","right"):("left"===s||"bottom-right"===s||"top-right"===s)&&o.left-r<c.left&&(n="left"===s?"right":n.replace("right","left")),L.removeClass(s).addClass(n)}var d=S(n,o,r,l);M(d.top,d.left)}},A.$onKeyUp=function(t){27===t.which&&A.$isShown&&(A.hide(),t.stopPropagation())},A.$onFocusKeyUp=function(t){27===t.which&&(e[0].blur(),t.stopPropagation())},A.$onFocusElementMouseDown=function(t){t.preventDefault(),t.stopPropagation(),A.$isShown?e[0].blur():e[0].focus()};var _=!1;return A}function f(t){t.$$phase||t.$root&&t.$root.$$phase||t.$digest()}function g(t,e){return angular.element((e||document).querySelectorAll(t))}function m(t){return y[t]?y[t]:y[t]=i.when(o.get(t)||r.get(t)).then(function(e){return angular.isObject(e)?(o.put(t,e.data),e.data):e})}var h=String.prototype.trim,b="createTouch"in e.document,$=/ng-bind="/gi,v=angular.element(e.document),y={};return p}]}).directive("jbTip",["$window","$location","$sce","$jbTip","$$rAF",function(t,e,n,a,i){return{restrict:"EAC",scope:!0,link:function(t,e,o){var r={scope:t};angular.forEach(["template","contentTemplate","placement","container","delay","trigger","keyboard","html","animation","backdropAnimation","type","customClass","id"],function(t){angular.isDefined(o[t])&&(r[t]=o[t])}),e.attr("data-target")&&(r.target=e.attr("data-target")),t.hasOwnProperty("title")||(t.title=""),o.$observe("title",function(e){if(angular.isDefined(e)||!t.hasOwnProperty("title")){var a=t.title;
t.title=n.trustAsHtml(e),angular.isDefined(a)&&i(function(){l&&l.$applyPlacement()})}}),o.jbTip&&t.$watch(o.jbTip,function(e,n){angular.isObject(e)?angular.extend(t,e):t.title=e,angular.isDefined(n)&&i(function(){l&&l.$applyPlacement()})},!0),o.bsShow&&t.$watch(o.bsShow,function(t){l&&angular.isDefined(t)&&(angular.isString(t)&&(t=!!t.match(/true|,?(tooltip),?/i)),t===!0?l.show():l.hide())}),o.bsEnabled&&t.$watch(o.bsEnabled,function(t){l&&angular.isDefined(t)&&(angular.isString(t)&&(t=!!t.match(/true|1|,?(tooltip),?/i)),t===!1?l.setEnabled(!1):l.setEnabled(!0))});var l=a(e,r);t.$on("$destroy",function(){l&&l.destroy(),r=null,l=null})}}}]),angular.module("jb.ui").controller("TabsetController",["$scope",function(t){var e=this,n=e.tabs=t.tabs=[];e.select=function(t){angular.forEach(n,function(t){t.active=!1}),t.active=!0},e.addTab=function(t){n.push(t),(1===n.length||t.active)&&e.select(t)},e.removeTab=function(t){var a=n.indexOf(t);if(t.active&&n.length>1){var i=a==n.length-1?a-1:a+1;e.select(n[i])}n.splice(a,1)}}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,require:"^tabset",scope:{},controller:"TabsetController",templateUrl:"jb/ui/tabs/tabset.tpl.html",compile:function(t,e,n){return function(t,e,a,i){t.vertical=angular.isDefined(a.vertical)?t.$parent.$eval(a.vertical):!1,t.justified=angular.isDefined(a.justified)?t.$parent.$eval(a.justified):!1,t.type=angular.isDefined(a.type)?t.$parent.$eval(a.type):"tabs",t.direction=angular.isDefined(a.direction)?t.$parent.$eval(a.direction):"top",t.tabsAbove="below"!=t.direction,i.$scope=t,i.$transcludeFn=n}}}}).directive("tab",["$parse",function(t){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"jb/ui/tabs/tab.tpl.html",transclude:!0,scope:{heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(e,n,a){return function(e,n,i,o){var r,l;i.active?(r=t(i.active),l=r.assign,e.$parent.$watch(r,function(t,n){t!==n&&(e.active=!!t)}),e.active=r(e.$parent)):l=r=angular.noop,e.$watch("active",function(t){l(e.$parent,t),t?(o.select(e),e.onSelect()):e.onDeselect()}),e.disabled=!1,i.disabled&&e.$parent.$watch(t(i.disabled),function(t){e.disabled=!!t}),e.select=function(){e.disabled||(e.active=!0)},o.addTab(e),e.$on("$destroy",function(){o.removeTab(e)}),e.$transcludeFn=a}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(t,e){t.$watch("headingElement",function(t){t&&(e.html(""),e.append(t))})}}}]).directive("tabContentTransclude",function(){function t(t){return t.tagName&&(t.hasAttribute("tab-heading")||t.hasAttribute("data-tab-heading")||"tab-heading"===t.tagName.toLowerCase()||"data-tab-heading"===t.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(e,n,a){var i=e.$eval(a.tabContentTransclude);i.$transcludeFn(i.$parent,function(e){angular.forEach(e,function(e){t(e)?i.headingElement=e:n.append(e)})})}}}).directive("tabsetTitles",function(){return{restrict:"A",require:"^tabset",templateUrl:"jb/ui/tabs/tabset-titles.tpl.html",replace:!0,link:function(t,e,n,a){t.$eval(n.tabsetTitles)?a.$transcludeFn(a.$scope.$parent,function(t){e.append(t)}):e.remove()}}}),function(){var t=angular.module("jb.ui"),e=["$scope","$element","$transclude",function(t,e,n){var a;t.$on("$destroy",function(){a&&(a.remove(),a=null)}),this.transclude=function(t,e){for(var n=0;n<a.length;++n){var i=angular.element(a[n]);if(i.attr("name")===t)return e.empty(),i.attr("jb-transclude-self")?e.append(i):e.append(i.children()),void 0}},n(function(t){a=t})}];t.directive("jbTransclude",function(){return{controller:e}}),t.directive("jbPartial",function(){return{require:["^jbTransclude"],link:function(t,e,n,a){var i=a[0];i.transclude(n.jbPartial,e)}}})}(),angular.module("jb.ui").directive("jbTriStateCheckboxTreeview",function(){return{restrict:"ECA",link:function(t,e){e.on("change",function(t){function e(t){var a=t.parent().parent(),i=!0;t.siblings().each(function(){return i=$(this).children('input[type="checkbox"]').prop("checked")===n}),i&&n?(a.children('input[type="checkbox"]').prop({indeterminate:!1,checked:n}),e(a)):i&&!n?(a.children('input[type="checkbox"]').prop("checked",n),a.children('input[type="checkbox"]').prop("indeterminate",a.find('input[type="checkbox"]:checked').length>0),e(a)):t.parents("li").children('input[type="checkbox"]').prop({indeterminate:!0,checked:!1})}{var n=$(t.target).prop("checked"),a=$(t.target).parent();a.siblings()}a.find('input[type="checkbox"]').prop({indeterminate:!1,checked:n}),e(a)})}}}),function(){var t=angular.module("jb.ui.widget",[]),e=["$scope","$element","$attrs",function(t,e,n){var a=this,i=[];e.addClass("panel-group"),this.add=function(t){i.push(t),t.$on("$destroy",function(){a.del(t)})},this.del=function(t){var e=i.indexOf(t);-1!==e&&i.splice(e,1)},this.closeOthers=function(e){var a=t.$eval(n.jbWidgets);a||angular.forEach(i,function(t){t!==e&&(t.isHide=!0)})}}];t.directive("jbWidgets",function(){return{controller:e}}),t.directive("jbWidget",function(){return{restrict:"EA",require:"^?jbWidgets",transclude:!0,replace:!0,templateUrl:"jb/ui/widget/widget.tpl.html",scope:{title:"@",isHide:"=?",showFoot:"=",ctx:"=?jbCtx"},link:function(t,e,n,a){var i=a;i&&(i.add(t),t.$watch("isHide",function(e){e||i.closeOthers(t)})),t.$toggle=function(){t.isHide=!t.isHide}}}})}(),function(t){function e(){}var n=t.module("jb.ui.table");e.$inject=["$scope"],n.directive("jbTable",["$compile","$q","$parse",function(t,n,a){return{scope:{},restrict:"A",controller:e,compile:function(e){var n=[],i=0,o=null;return angular.forEach(angular.element(e.find("tr")),function(t){t=angular.element(t),t.hasClass("jb-table-add")||o||(o=t)}),o?(angular.forEach(o.find("td"),function(t){var e=angular.element(t),o=function(t,i){return function(o){return a(e.attr("x-data-"+t)||e.attr("data-"+t)||e.attr(t))(o,{$columns:n})||i}},r=o("title"," ");n.push({id:i++,title:r()})}),function(e,a){e.$columns=n,e.headerTpl="jb/ui/table/tableHeader.tpl.html";var i=angular.element(document.createElement("thead")).attr("ng-include","headerTpl");a.addClass("jb-table").prepend(i),t(i)(e)}):void 0}}}])}(angular),function(t){function e(e,n,a,i,o,r,l,s){function u(){e.$src=c(e.meta.ctx.lst),m.pipe(),d()}function c(t){return t?[].concat(t):[]}function d(){function e(){t.forEach($,function(t){t.onResize()})}r(e,10,!0)}function p(t){var e,n,a=b("{{$row.{0}}}",t.field),i="<td>{0}</td>",o="<td {0}>{1}</td>";return t.celltpl?a=t.celltpl:t.field&&("int"===t.type?n='class="text-right text-middle"':"date"===t.type?a=b("{{$row.{0}|date}}",t.field):"jbzd"===t.type&&(n=b('jb-zd="{0}" jb-zd-dm="$row.{1}"',t.jbzd,t.field))),e=n?b(o,n,a):b(i,a)}var f,g=angular.element(l),m=this,h=i("orderBy"),b=(i("filter"),s.fmt),$=(e.$src=c(e.src),[]),v={sort:{},search:{},pagination:{start:0}};e.$watchCollection("meta.ctx.lst",u),g.on("resize",d),this.addCol=function(t){$.push(t),t.$on("$destroy",function(){m.del(t)})},this.del=function(t){var e=$.indexOf(t);-1!==e&&$.splice(e,1)},this.sortBy=function(t,e){return v.sort.predicate=t,v.sort.reverse=e===!0,this.pipe()},e.pager=function(t){e.meta.filter.page=t,e.meta.ctx.refresh(e.meta.filter)},this.filter=function(){var n=[];t.forEach(e.meta.cols,function(t){void 0!==t.filter&&n.push(t.filter)}),e.meta.filter.groups=n,console.log(e.meta.filter),e.meta.ctx.refresh(e.meta.filter)},this.pipe=function(){f=c(e.meta.ctx.lst),v.sort.predicate&&(f=h(f,v.sort.predicate,v.sort.reverse)),e.$src=f},this.bodyTr=function(){var n='<tr ng-repeat="$row in $src">';return t.forEach(e.meta.cols,function(t){n+=p(t)}),n+="</tr>"},e.$on("$destroy",function(){g.off("resize",d)})}var n=t.module("jb.ui.table"),a={empty:"空",not_empty:"非空",contains:"包含",start:"开始为",end:"结束为",equal:"等于"},i={NONE:"无",AND:"与",OR:"或"};e.$inject=["$scope","$element","$attrs","$filter","$parse","$timeout","$window","$jb"],n.directive("jbTable2",["$compile","$q","$parse",function(){return{replace:!0,templateUrl:"jb/ui/table/table.tpl.html",scope:{meta:"=jbMeta"},controller:e,link:function(){}}}]),n.directive("jbTableTh",function(){return{require:"^jbTable2",link:function(t,e,n,a){a.addCol(t),t.onResize=function(){t.col.width=e[0].clientWidth}}}}),n.directive("jbTableCol",["$compile","$q","$parse","$jbFilter",function(t,e,n,o){return{require:"^jbTable2",restrict:"C",replace:!0,templateUrl:"jb/ui/table/th.tpl.html",link:function(t,e,n,r){function l(){t.$index++,r.sortBy(t.col.field,t.$index%2===0)}t.$index=0,t.pop={filterOpt:a,filterCondition:i},t.onTitle=function(){void 0!==t.col.sort&&l()},t.onFilter=function(){r.filter()},t.col.filter===!0&&(t.col.filter=o.group2(null,t.col.field))}}}]),n.directive("jbTableBody",["$compile","$q","$parse",function(t){return{require:"^jbTable2",link:function(e,n,a,i){var o=t(i.bodyTr())(e);n.append(o)}}}])}(angular),angular.module("jBreak",["LocalStorageModule","ngLocale","jb","jb.sys","jb.auth","jb.ctx","jb.res","jb.filter","jb.ui","jb.zd"]).config(["localStorageServiceProvider",function(t){t.setPrefix("jBreak").setNotify(!0,!0)}]),function(t){try{t=angular.module("jb.ui.tpls")}catch(e){t=angular.module("jb.ui.tpls",[])}t.run(["$templateCache",function(t){t.put("jb/ui/alert/alert.tpl.html",'<div class="alert" ng-class="[type ? \'alert-\' + type : null,$placement]"><button type="button" class="close" ng-if="dismissable" ng-click="$hide()">&times;</button> <strong ng-bind="title"></strong>&nbsp;<span ng-bind-html="content"></span></div>')}])}(),function(t){try{t=angular.module("jb.ui.tpls")}catch(e){t=angular.module("jb.ui.tpls",[])}t.run(["$templateCache",function(t){t.put("jb/ui/aside/aside.tpl.html",'<div class="modal" tabindex="-1" role="dialog"><div class="modal-backdrop"></div><div class="aside-dialog" ng-class="{\'modal-sm\': $size == \'sm\', \'modal-lg\': $size == \'lg\',\'left\':$placement==\'left\'}"><div class="aside-content"><div class="aside-header" ng-show="title"><button type="button" class="close" ng-click="$hide()">&times;</button><h4 class="aside-title" ng-bind="title"></h4></div><div class="aside-body" ng-bind="content"></div><div class="aside-footer"><button type="button" class="btn btn-default" ng-click="$hide()">Close</button></div></div></div></div>')}])}(),function(t){try{t=angular.module("jb.ui.tpls")}catch(e){t=angular.module("jb.ui.tpls",[])}t.run(["$templateCache",function(t){t.put("jb/ui/checkList/checkList.tpl.html",'<label class="checkbox-inline" ng-repeat="s in jbSrc"><input type="checkbox" value="{{s}}" ng-checked="selection.indexOf(s) > -1" ng-click="toggleSelection(s)"> {{s}}</label> <label class="checkbox-inline" ng-show="jbOther"><input type="checkbox" ng-model="otherCk" ng-click="toggleOther()"> 其他</label> <label class="checkbox-inline" ng-show="jbOther"><input type="text" ng-model="otherVal" class="form-control input-sm"></label>')}])}(),function(t){try{t=angular.module("jb.ui.tpls")}catch(e){t=angular.module("jb.ui.tpls",[])}t.run(["$templateCache",function(t){t.put("jb/ui/datetime/datepicker.tpl.html",'<div class="dropdown-menu datepicker" ng-class="\'datepicker-mode-\' + $mode" style="max-width: 320px;"><table style="table-layout: fixed; height: 100%; width: 100%;"><thead><tr class="text-center"><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$selectPane(-1)"><i class="{{$iconLeft}}"></i></button></th><th colspan="{{ rows[0].length - 2 }}"><button tabindex="-1" type="button" class="btn btn-default btn-block text-strong" ng-click="$toggleMode()"><strong style="text-transform: capitalize;" ng-bind="title"></strong></button></th><th><button tabindex="-1" type="button" class="btn btn-default pull-right" ng-click="$selectPane(+1)"><i class="{{$iconRight}}"></i></button></th></tr><tr ng-show="showLabels" ng-bind-html="labels"></tr></thead><tbody><tr ng-repeat="(i, row) in rows" height="{{ 100 / rows.length }}%"><td class="text-center" ng-repeat="(j, el) in row"><button tabindex="-1" type="button" class="btn btn-default" style="width: 100%" ng-class="{\'btn-primary\': el.selected, \'btn-info btn-today\': el.isToday && !el.selected}" ng-click="$select(el.date)" ng-disabled="el.disabled"><span ng-class="{\'text-muted\': el.muted}" ng-bind="el.label"></span></button></td></tr></tbody></table></div>')}])}(),function(t){try{t=angular.module("jb.ui.tpls")}catch(e){t=angular.module("jb.ui.tpls",[])}t.run(["$templateCache",function(t){t.put("jb/ui/datetime/timepicker.tpl.html",'<div class="dropdown-menu timepicker" style="min-width: 0px;width: auto;"><table height="100%"><thead><tr class="text-center"><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(-1, 0)"><i class="{{ $iconUp }}"></i></button></th><th>&nbsp;</th><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(-1, 1)"><i class="{{ $iconUp }}"></i></button></th></tr></thead><tbody><tr ng-repeat="(i, row) in rows"><td class="text-center"><button tabindex="-1" style="width: 100%" type="button" class="btn btn-default" ng-class="{\'btn-primary\': row[0].selected}" ng-click="$select(row[0].date, 0)" ng-disabled="row[0].disabled"><span ng-class="{\'text-muted\': row[0].muted}" ng-bind="row[0].label"></span></button></td><td><span ng-bind="i == midIndex ? timeSeparator : \' \'"></span></td><td class="text-center"><button tabindex="-1" ng-if="row[1].date" style="width: 100%" type="button" class="btn btn-default" ng-class="{\'btn-primary\': row[1].selected}" ng-click="$select(row[1].date, 1)" ng-disabled="row[1].disabled"><span ng-class="{\'text-muted\': row[1].muted}" ng-bind="row[1].label"></span></button></td><td ng-if="showAM">&nbsp;</td><td ng-if="showAM"><button tabindex="-1" ng-show="i == midIndex - !isAM * 1" style="width: 100%" type="button" ng-class="{\'btn-primary\': !!isAM}" class="btn btn-default" ng-click="$switchMeridian()" ng-disabled="el.disabled">AM</button> <button tabindex="-1" ng-show="i == midIndex + 1 - !isAM * 1" style="width: 100%" type="button" ng-class="{\'btn-primary\': !isAM}" class="btn btn-default" ng-click="$switchMeridian()" ng-disabled="el.disabled">PM</button></td></tr></tbody><tfoot><tr class="text-center"><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(1, 0)"><i class="{{ $iconDown }}"></i></button></th><th>&nbsp;</th><th><button tabindex="-1" type="button" class="btn btn-default pull-left" ng-click="$arrowAction(1, 1)"><i class="{{ $iconDown }}"></i></button></th></tr></tfoot></table></div>')}])}(),function(t){try{t=angular.module("jb.ui.tpls")}catch(e){t=angular.module("jb.ui.tpls",[])}t.run(["$templateCache",function(t){t.put("jb/ui/dropdown/dropdown.tpl.html",'<ul tabindex="-1" class="dropdown-menu" role="menu"><li role="presentation" ng-class="{divider: item.divider}" ng-repeat="item in content"><a role="menuitem" tabindex="-1" ng-href="{{item.href}}" ng-if="!item.divider && item.href" target="{{item.target || \'\'}}" ng-bind="item.text"></a> <a role="menuitem" tabindex="-1" href="javascript:void(0)" ng-if="!item.divider && item.click" ng-click="$eval(item.click);$hide()" ng-bind="item.text"></a></li></ul>')}])}(),function(t){try{t=angular.module("jb.ui.tpls")}catch(e){t=angular.module("jb.ui.tpls",[])}t.run(["$templateCache",function(t){t.put("jb/ui/form/fg.tpl.html",'<div class="form-group form-group-sm"><label>{{lb}}</label> <input type="text" class="form-control" ng-model="ip"></div>')}])}(),function(t){try{t=angular.module("jb.ui.tpls")}catch(e){t=angular.module("jb.ui.tpls",[])}t.run(["$templateCache",function(t){t.put("jb/ui/form/fgh.tpl.html",'<div class="form-group form-group-sm"><label class="control-label {{w0}}">{{lb}}</label><div class="{{w1}}" ng-transclude=""></div></div>')}])}(),function(t){try{t=angular.module("jb.ui.tpls")}catch(e){t=angular.module("jb.ui.tpls",[])}t.run(["$templateCache",function(t){t.put("jb/ui/form/fgh2.tpl.html",'<div class="form-group form-group-sm" jb-transclude=""><label class="control-label {{w0}}">{{lb[0]}}</label><div class="{{w1}}" jb-partial="input1"></div><label class="control-label {{w2}}">{{lb[1]}}</label><div class="{{w3}}" jb-partial="input2"></div></div>')}])}(),function(t){try{t=angular.module("jb.ui.tpls")}catch(e){t=angular.module("jb.ui.tpls",[])}t.run(["$templateCache",function(t){t.put("jb/ui/inputGroupDropdownBtn/inputGroupDropdownBtn.tpl.html",'<div class="input-group-btn"><button class="btn btn-default" jb-dropdown-toggle=""><span class="caret"></span></button><ul class="dropdown-menu pull-right"><li ng-repeat="it in jbSrc"><a ng-click="update(it)">{{it}}</a></li></ul></div>')}])}(),function(t){try{t=angular.module("jb.ui.tpls")}catch(e){t=angular.module("jb.ui.tpls",[])}t.run(["$templateCache",function(t){t.put("jb/ui/modal/modal.tpl.html",'<div class="modal fade in" tabindex="-1" role="dialog"><div class="modal-backdrop"></div><div class="modal-dialog" ng-class="{\'modal-sm\': $size == \'sm\', \'modal-lg\': $size == \'lg\',\'center\':$placement==\'center\'}"><div class="modal-content"><div class="modal-header" ng-show="title"><button type="button" class="close" ng-click="$hide()">&times;</button><h4 class="modal-title" ng-bind="title"></h4></div><div class="modal-body" ng-bind="content"></div><div class="modal-footer"><button type="button" class="btn btn-primary" ng-click="$ok()">确定</button> <button type="button" class="btn btn-default" ng-click="$hide()">取消</button></div></div></div></div>')}])}(),function(t){try{t=angular.module("jb.ui.tpls")}catch(e){t=angular.module("jb.ui.tpls",[])}t.run(["$templateCache",function(t){t.put("jb/ui/pager/pager.tpl.html",'<ul class="pager"><li ng-repeat="page in pages" ng-class="{disabled: page.disabled, previous: page.previous, next: page.next}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li></ul>')}])}(),function(t){try{t=angular.module("jb.ui.tpls")}catch(e){t=angular.module("jb.ui.tpls",[])}t.run(["$templateCache",function(t){t.put("jb/ui/pager/pagination.tpl.html",'<ul class="pagination"><li ng-repeat="page in pages" ng-class="{active: page.active, disabled: page.disabled}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li></ul>')}])}(),function(t){try{t=angular.module("jb.ui.tpls")}catch(e){t=angular.module("jb.ui.tpls",[])}t.run(["$templateCache",function(t){t.put("jb/ui/popover/popover.tpl.html",'<div class="popover"><div class="arrow"></div><h3 class="popover-title" ng-bind="title" ng-show="title"></h3><div class="popover-content" ng-bind="content"></div></div>')}])}(),function(t){try{t=angular.module("jb.ui.tpls")}catch(e){t=angular.module("jb.ui.tpls",[])}t.run(["$templateCache",function(t){t.put("jb/ui/radioList/radioList.tpl.html",'<label class="radio-inline" ng-repeat="s in jbSrc"><input type="radio" value="{{s}}" ng-checked="selection==s" ng-click="select(s)"> {{s}}</label> <label class="radio-inline" ng-show="jbOther"><input type="radio" ng-checked="selection==\'other\'" value="other" ng-click="select(\'other\')"> 其他</label> <label class="checkbox-inline" ng-show="jbOther"><input type="text" ng-model="otherVal" class="form-control input-sm"></label>')}])}(),function(t){try{t=angular.module("jb.ui.tpls")}catch(e){t=angular.module("jb.ui.tpls",[])}t.run(["$templateCache",function(t){t.put("jb/ui/select/select.tpl.html",'<ul tabindex="-1" class="select dropdown-menu" ng-show="$isVisible()" role="select"><li ng-if="$showAllNoneButtons"><div class="btn-group" style="margin-bottom: 5px; margin-left: 5px"><button type="button" class="btn btn-default btn-xs" ng-click="$selectAll()">{{$allText}}</button> <button type="button" class="btn btn-default btn-xs" ng-click="$selectNone()">{{$noneText}}</button></div></li><li role="presentation" ng-repeat="match in $matches" ng-class="{active: $isActive($index)}"><a style="cursor: default;" role="menuitem" tabindex="-1" ng-click="$select($index, $event)"><i class="{{$iconCheckmark}} pull-right" ng-if="$isMultiple && $isActive($index)"></i> <span ng-bind="match.label"></span></a></li></ul>')}])}(),function(t){try{t=angular.module("jb.ui.tpls")}catch(e){t=angular.module("jb.ui.tpls",[])}t.run(["$templateCache",function(t){t.put("jb/ui/table/table.tpl.html",'<div class="panel panel-default jb-table"><div class="panel-heading"><div ng-repeat="col in meta.cols" class="jb-table-col"></div></div><div class="panel-collapse"><table class="table table-bordered table-hover table-condensed"><thead><tr><th ng-repeat="col in meta.cols" jb-table-th="" class="th">{{col.title}}</th></tr></thead><tbody jb-table-body=""></tbody><tfoot></tfoot></table></div><div class="panel-footer"><jb-pagination ng-if="meta.page" boundary-links="true" total-items="meta.ctx.total" page="meta.ctx.page" max-size="10" items-per-page="meta.filter.perPage" on-select-page="pager(page)" class="pagination-sm pull-right" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></jb-pagination></div></div>')}])}(),function(t){try{t=angular.module("jb.ui.tpls")}catch(e){t=angular.module("jb.ui.tpls",[])}t.run(["$templateCache",function(t){t.put("jb/ui/table/tableHeader.tpl.html",'<tr><th ng-repeat="c in $columns">{{c.title}}</th></tr>')}])}(),function(t){try{t=angular.module("jb.ui.tpls")}catch(e){t=angular.module("jb.ui.tpls",[])}t.run(["$templateCache",function(t){t.put("jb/ui/table/th-opt.tpl.html",'<ul tabindex="-1" class="dropdown-menu jb-th-opt" role="menu"><li role="presentation"><a role="menuitem" href="#"><span class="glyphicon glyphicon-sort-by-alphabet"></span> 升序(最低到最高)</a></li><li role="presentation"><a role="menuitem" href="#"><span class="glyphicon glyphicon-sort-by-alphabet-alt"></span> 降序(最高到最低)</a></li><li role="presentation"><a role="menuitem" href="#"><span class="glyphicon glyphicon-sort"></span> 不排序</a></li><li class="divider"></li><li ng-if="col.filter!==undefined"><div class="jb-th-opt-filter"><select class="form-control input-sm" ng-model="col.filter.Rules[0].Opt" ng-options="k as v for (k,v) in filterOpt"></select><input type="text" class="form-control input-sm" ng-model="col.filter.Rules[0].Val1"><div class="form-group-sm"><label class="radio-inline" ng-repeat="(k,v) in filterCondition"><input type="radio" value="{{k}}" ng-model="col.filter.Condition"> {{v}}</label></div><select class="form-control input-sm" ng-model="col.filter.Rules[1].Opt" ng-disabled="col.filter.Condition==\'NONE\'" ng-options="k as v for (k,v) in filterOpt"></select><input type="text" class="form-control input-sm" ng-model="col.filter.Rules[1].Val1" ng-disabled="col.filter.Condition==\'NONE\'"><div class="btn-group btn-group-sm pull-right"><button class="btn btn-primary" ng-click="onFilter()">过滤</button> <button class="btn btn-default">清除</button></div></div></li></ul>')}])}(),function(t){try{t=angular.module("jb.ui.tpls")}catch(e){t=angular.module("jb.ui.tpls",[])}t.run(["$templateCache",function(t){t.put("jb/ui/table/th.tpl.html",'<div ng-style="{\'width\':col.width+\'px\'}"><span ng-click="onTitle()">{{col.title}}</span> <span class="jb-th-right"><span ng-if="col.sort!==undefined" class="glyphicon" ng-class="{\'glyphicon-triangle-bottom\':$index%2==1,\'glyphicon-triangle-top\':$index%2==0}"></span> <span ng-if="col.filter!==undefined" class="glyphicon glyphicon-filter"></span> <span class="glyphicon glyphicon-menu-down" jb-pop="pop" data-auto-close="false" data-placement="right-bottom" data-template="jb/ui/table/th-opt.tpl.html"></span></span></div>')}])}(),function(t){try{t=angular.module("jb.ui.tpls")}catch(e){t=angular.module("jb.ui.tpls",[])}t.run(["$templateCache",function(t){t.put("jb/ui/tooltip/tooltip.tpl.html",'<div class="tooltip in" ng-show="title"><div class="tooltip-arrow"></div><div class="tooltip-inner" ng-bind="title"></div></div>')}])}(),function(t){try{t=angular.module("jb.ui.tpls")}catch(e){t=angular.module("jb.ui.tpls",[])}t.run(["$templateCache",function(t){t.put("jb/ui/tabs/tab.tpl.html",'<li ng-class="{active: active, disabled: disabled}"><a ng-click="select()" tab-heading-transclude="">{{heading}}</a></li>')}])}(),function(t){try{t=angular.module("jb.ui.tpls")}catch(e){t=angular.module("jb.ui.tpls",[])}t.run(["$templateCache",function(t){t.put("jb/ui/tabs/tabset-titles.tpl.html","<ul class=\"nav {{type && 'nav-' + type}}\" ng-class=\"{'nav-stacked': vertical, 'nav-justified': justified}\"></ul>")}])}(),function(t){try{t=angular.module("jb.ui.tpls")}catch(e){t=angular.module("jb.ui.tpls",[])}t.run(["$templateCache",function(t){t.put("jb/ui/tabs/tabset.tpl.html",'<div class="tabbable" ng-class="{\'tabs-right\': direction == \'right\', \'tabs-left\': direction == \'left\', \'tabs-below\': direction == \'below\'}"><div tabset-titles="tabsAbove"></div><div class="tab-content"><div class="tab-pane" ng-repeat="tab in tabs" ng-class="{active: tab.active}" tab-content-transclude="tab"></div></div><div tabset-titles="!tabsAbove"></div></div>')}])}(),function(t){try{t=angular.module("jb.ui.tpls")}catch(e){t=angular.module("jb.ui.tpls",[])}t.run(["$templateCache",function(t){t.put("jb/ui/widget/widget.tpl.html",'<div class="panel panel-default" jb-transclude=""><div class="panel-heading" jb-partial="heading"><div jb-partial="actions" class="btn-group btn-group-xs pull-right"><button class="btn btn-default" ng-click="$toggle()">X</button></div><div jb-partial="tools" class="pull-right" style="margin-right: 10px"></div><h4 class="panel-title" jb-partial="title">{{title}}</h4></div><div class="panel-collapse collapse" ng-class="{\'in\':!isHide}" jb-partial="body"><div class="panel-body" jb-partial="content"></div></div><div class="panel-footer" ng-if="showFoot"></div></div>')}])}(),function(t,e){var n=e.isDefined,a=e.isUndefined,i=e.isNumber,o=e.isObject,r=e.isArray,l=e.extend,s=e.toJson,u=e.module("LocalStorageModule",[]);u.provider("localStorageService",function(){this.prefix="ls",this.storageType="localStorage",this.cookie={expiry:30,path:"/"},this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(t){return this.prefix=t,this},this.setStorageType=function(t){return this.storageType=t,this},this.setStorageCookie=function(t,e){return this.cookie.expiry=t,this.cookie.path=e,this},this.setStorageCookieDomain=function(t){return this.cookie.domain=t,this},this.setNotify=function(t,e){return this.notify={setItem:t,removeItem:e},this},this.$get=["$rootScope","$window","$document","$parse",function(t,e,u,c){var d,p=this,f=p.prefix,g=p.cookie,m=p.notify,h=p.storageType;u?u[0]&&(u=u[0]):u=document,"."!==f.substr(-1)&&(f=f?f+".":"");var b=function(t){return f+t},$=function(){try{var n=h in e&&null!==e[h],a=b("__"+Math.round(1e7*Math.random()));return n&&(d=e[h],d.setItem(a,""),d.removeItem(a)),n}catch(i){return h="cookie",t.$broadcast("LocalStorageModule.notification.error",i.message),!1}}(),v=function(e,n){if(n=a(n)?null:s(n),!$||"cookie"===p.storageType)return $||t.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),m.setItem&&t.$broadcast("LocalStorageModule.notification.setitem",{key:e,newvalue:n,storageType:"cookie"}),D(e,n);try{d&&d.setItem(b(e),n),m.setItem&&t.$broadcast("LocalStorageModule.notification.setitem",{key:e,newvalue:n,storageType:p.storageType})}catch(i){return t.$broadcast("LocalStorageModule.notification.error",i.message),D(e,n)}return!0},y=function(e){if(!$||"cookie"===p.storageType)return $||t.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),T(e);var n=d?d.getItem(b(e)):null;if(!n||"null"===n)return null;try{return JSON.parse(n)}catch(a){return n}},w=function(){var e,n;for(e=0;e<arguments.length;e++)if(n=arguments[e],$&&"cookie"!==p.storageType)try{d.removeItem(b(n)),m.removeItem&&t.$broadcast("LocalStorageModule.notification.removeitem",{key:n,storageType:p.storageType})}catch(a){t.$broadcast("LocalStorageModule.notification.error",a.message),S(n)}else $||t.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),m.removeItem&&t.$broadcast("LocalStorageModule.notification.removeitem",{key:n,storageType:"cookie"}),S(n)},j=function(){if(!$)return t.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),!1;var e=f.length,n=[];for(var a in d)if(a.substr(0,e)===f)try{n.push(a.substr(e))}catch(i){return t.$broadcast("LocalStorageModule.notification.error",i.Description),[]}return n},x=function(e){var n=f?new RegExp("^"+f):new RegExp,a=e?new RegExp(e):new RegExp;if(!$||"cookie"===p.storageType)return $||t.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),M();var i=f.length;for(var o in d)if(n.test(o)&&a.test(o.substr(i)))try{w(o.substr(i))}catch(r){return t.$broadcast("LocalStorageModule.notification.error",r.message),M()}return!0},k=function(){try{return e.navigator.cookieEnabled||"cookie"in u&&(u.cookie.length>0||(u.cookie="test").indexOf.call(u.cookie,"test")>-1)}catch(n){return t.$broadcast("LocalStorageModule.notification.error",n.message),!1}}(),D=function(e,n,l){if(a(n))return!1;if((r(n)||o(n))&&(n=s(n)),!k)return t.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var c="",d=new Date,p="";if(null===n?(d.setTime(d.getTime()+-864e5),c="; expires="+d.toGMTString(),n=""):i(l)&&0!==l?(d.setTime(d.getTime()+24*l*60*60*1e3),c="; expires="+d.toGMTString()):0!==g.expiry&&(d.setTime(d.getTime()+24*g.expiry*60*60*1e3),c="; expires="+d.toGMTString()),e){var f="; path="+g.path;g.domain&&(p="; domain="+g.domain),u.cookie=b(e)+"="+encodeURIComponent(n)+c+f+p}}catch(m){return t.$broadcast("LocalStorageModule.notification.error",m.message),!1}return!0},T=function(e){if(!k)return t.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var n=u.cookie&&u.cookie.split(";")||[],a=0;a<n.length;a++){for(var i=n[a];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(b(e)+"=")){var o=decodeURIComponent(i.substring(f.length+e.length+1,i.length));try{return JSON.parse(o)}catch(r){return o}}}return null},S=function(t){D(t,null)},M=function(){for(var t=null,e=f.length,n=u.cookie.split(";"),a=0;a<n.length;a++){for(t=n[a];" "===t.charAt(0);)t=t.substring(1,t.length);var i=t.substring(e,t.indexOf("="));S(i)}},C=function(){return h},A=function(t,e,a,i){i=i||e;var r=y(i);return null===r&&n(a)?r=a:o(r)&&o(a)&&(r=l(a,r)),c(e).assign(t,r),t.$watch(e,function(t){v(i,t)},o(t[e]))},E=function(){for(var t=0,n=e[h],a=0;a<n.length;a++)0===n.key(a).indexOf(f)&&t++;return t};return{isSupported:$,getStorageType:C,set:v,add:v,get:y,keys:j,remove:w,clearAll:x,bind:A,deriveKey:b,length:E,cookie:{isSupported:k,set:D,add:D,get:T,remove:S,clearAll:M}}}]})}(window,window.angular);